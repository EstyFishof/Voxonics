"use strict";(self["webpackChunkVoxonics"]=self["webpackChunkVoxonics"]||[]).push([[226],{11107:function(e,t,i){i.d(t,{Z:function(){return c}});var s=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"btn-container"},[t("button",{staticClass:"apply-btn",on:{click:function(t){return e.apply()}}},[e._v(e._s(e.text||"Apply Changes"))]),t("div",{staticClass:"clean-btn",on:{click:function(t){return e.discard()}}},[t("img",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",arrow:!0,delay:800,duration:500},expression:"{ placement : 'top',  arrow: true, delay : 800, duration: 500 }"}],attrs:{width:"24",height:"25",content:"Discard",src:i(62091),alt:"broom"}})])])},n=[],a={name:"ControlPanel",props:["show","apply","discard","text"],mounted(){document.addEventListener("keydown",(e=>{"s"===e.key&&(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&this.show&&(e.preventDefault(),this.apply()),(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&"z"===e.key&&this.discard()}),!1)}},r=a,o=i(1001),l=(0,o.Z)(r,s,n,!1,null,"0c4a9bee",null),c=l.exports},69226:function(e,t,i){i.r(t),i.d(t,{default:function(){return ni}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"wrapper",class:{"full-screen":e.fullScreen},style:{width:e.wrapperWidth}},[t("div",{staticClass:"header"},[t("ScenariosMenu",{ref:"scenariosMenu",attrs:{getScenario:e.getScenario,deleteScenarios:e.getArrayUidsOfDeleteScenarios,confirmationConfig:e.confirmationConfig,confirmationToDeleteConfig:e.confirmationToDeleteConfig,confirmationValue:e.confirmationValue,showApplyBtn:e.showApplyBtn,getListScenarios:e.getListScenarios,getInitialList:e.getInitialList},on:{setDeleteScenarios:e.setDeleteScenarios,changeConfirmationConfig:e.changeConfirmationConfig,setConfirmationValue:e.setConfirmationValue,setShowApplyBtn:e.setShowApplyBtn,setScenarioProp:e.setScenario}}),t("div",{staticClass:"right-tabs"},[t("ControlPanel",{attrs:{show:e.showApplyBtn,apply:e.applyChanges,discard:e.clearChanges}})],1),t("div",{staticClass:"secondary-header"})],1),t("div",{staticClass:"body",style:{height:e.fullScreen?"95%":"90%"}},[t("span",{staticClass:"toggle-full-screen",on:{click:function(t){return e.toggleFullScreen(!e.fullScreen)}}},[e.fullScreen?t("img",{attrs:{src:"dark"===e.theme?e.icons.collapseFullScreenIcon:e.icons.collapseFullScreenIconLight}}):t("img",{attrs:{src:"dark"===e.theme?e.icons.expandToFullScreenIcon:e.icons.expandToFullScreenIconLight}})]),e.getScenario&&e.getScenario.scenario?t("div",{staticClass:"list-items"},[t("Item",{attrs:{link:e.getScenario.scenario,counter:e.counter,hoverProp:!1},on:{mountedItemProp:()=>{}}})],1):e._e(),""===e.getShowConfig?t("NewItemConfiguration",{staticClass:"configuration"}):"queue"===e.getShowConfig?t("queueConfiguration",{staticClass:"configuration"}):"dial"===e.getShowConfig?t("dial-configuration",{staticClass:"configuration"}):"vnumber-in"===e.getShowConfig?t("vNumberConfiguration",{staticClass:"configuration"}):"ivr"===e.getShowConfig?t("IVRConfiguration",{staticClass:"configuration"}):"wait"===e.getShowConfig?t("WaitConfiguration",{staticClass:"configuration"}):"announcement"===e.getShowConfig?t("AnnouncementConfiguration",{staticClass:"configuration"}):"hangup"===e.getShowConfig?t("HangupConfiguration",{staticClass:"configuration"}):e._e()],1)])},n=[],a=(i(57658),function(){var e=this,t=e._self._c;return e.link?t("div",{staticClass:"item-block",on:{mouseover:e.mouseoverHandler,mouseleave:e.mouseleaveHandler}},[t("div",{staticClass:"item",class:{active:e.link.category===(!!e.getItemScenario&&e.getItemScenario.category)},on:{click:function(t){return e.chooseItem(e.link)}}},[e.showSwappedIconBlue?t("img",{staticClass:"left-icon",attrs:{src:e.icon.swappedIconBlue},on:{click:function(t){return t.stopPropagation(),e.toggleSwappedMode.apply(null,arguments)}}}):e.showSwappedIconGreen?t("img",{staticClass:"left-icon",attrs:{src:e.icon.swappedIconGreen},on:{click:e.swappedItems}}):"vnumber-in"!=e.link.schema?t("div",{staticClass:"accession"},[t("img",{attrs:{src:i(5719)}})]):e._e(),e.link.extra&&e.link.extra.hasOwnProperty("ivr")?t("span",{staticClass:"ivr-input-wrapper"},[e._v(" "+e._s(e.link.extra.ivr)+" ")]):e._e(),t("div",[t("div",{staticClass:"nowrap"},[t("span",{staticClass:"image-block"},[t("img",{staticClass:"wrap-dots wrap-phone",attrs:{src:e.getTitleItem(e.link).icon}})]),t("span",{staticClass:"name-block ellipsis"},[e._v(" "+e._s(e.getTitleItem(e.link).text)+" "),"vnumber-in"===e.link.schema&&e.link.options.externalNumbers?t("span",{staticClass:"numbers-length"},[e._v(" Selected V-Numbers ( "+e._s(e.link.options.externalNumbers.length)+" ) ")]):e._e()])])]),t("div",{staticClass:"wrap-gear"},[t("img",{attrs:{width:"20",src:"dark"===e.theme?e.gearBlack:e.gearWhite}})]),t("div",{staticClass:"plus",class:{"plus-hover":e.hover&&"hangup"!==e.link.schema,"end-item":e.link.next&&!e.link.next.length&&!e.hover||"hangup"===e.link.schema},on:{click:function(t){return t.stopPropagation(),e.addNewItemHandler.apply(null,arguments)}}},[e.canToAddChildItem?t("svg",{attrs:{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.0625 6.5625H8.4375V0.9375C8.4375 0.419062 8.0175 0 7.5 0C6.9825 0 6.5625 0.419062 6.5625 0.9375V6.5625H0.9375C0.42 6.5625 0 6.98156 0 7.5C0 8.01844 0.42 8.4375 0.9375 8.4375H6.5625V14.0625C6.5625 14.5809 6.9825 15 7.5 15C8.0175 15 8.4375 14.5809 8.4375 14.0625V8.4375H14.0625C14.58 8.4375 15 8.01844 15 7.5C15 6.98156 14.58 6.5625 14.0625 6.5625Z",fill:"#FFFFFF"}})]):e.link.next.length?t("span",{staticClass:"point"}):t("img",{attrs:{src:i(74439)}})])]),e.link.next&&e.link.next.length?t("div",[t("drop-list",{ref:"dropList",staticClass:"list",attrs:{items:e.link.next,column:!0},on:{reorder:e.reorderHandler},scopedSlots:e._u([{key:"item",fn:function({item:i}){return[t("drag",{key:i.category},[t("Item",{attrs:{link:i,counter:e.counter+1,hoverProp:e.hover},on:{mountedItemProp:e.mountedItem}})],1)]}}],null,!1,1268993033)}),e._l(e.link.next,(function(i,s){return t("svg",{key:s+e.link.category,staticClass:"svg-line",attrs:{xmlns:"http://www.w3.org/2000/svg"}},[e.renderPaths?t("path",{attrs:{d:e.calculatePath(s),fill:"transparent","stroke-width":"2"}}):e._e()])}))],2):e._e()]):e._e()}),r=[],o=i(98999),l=i(8597),c=i(39786),u=i(88958),m=i(96828),h=i(77282),p=i(61821),d=i(17955),g=i(53135),f=i(87904),v=i(90467),S=i(1652),C=i(85700),y=i(88480),b=i(78205),I=i(35434),w=i(57581),N=i(27798),k=i(55346),x=i(90408),P={name:"Item",props:["link","counter","mountedItemProp","hoverProp"],components:{Drag:k.nc,DropList:k.Rr},data(){return{icon:{vnumberInBlack:c,vnumberInWhite:u,queueIconBlack:p,queueIconWhite:d,dialBlack:m,dialWhite:h,waitIconBlack:g,waitIconWhite:f,ivrIconBlack:v,ivrIconWhite:S,announcmentIconBlack:C,announcmentIconWhite:y,hangupIcon:b,hangupIconWhite:I,swappedIconBlue:w,swappedIconGreen:N},itemWidth:244,itemHeight:52,gapVertival:48,gapHorizontal:85,gearBlack:o,gearWhite:l,renderPaths:!1,hover:this.hoverProp,paths:[]}},computed:{...(0,x.Se)(["getGlobalUsersList","getScenario","getItemScenario","theme","getIsSwappedMode"]),canToAddChildItem(){return this.hover&&("ivr"===this.link.schema||!this.link.next?.length&&"hangup"!==this.link.schema)},showSwappedIconBlue(){return this.link.category===this.getItemScenario?.category&&"vnumber-in"!=this.link.schema&&"ivr"!==this.link.schema&&"hangup"!==this.link.schema},showSwappedIconGreen(){return this.getIsSwappedMode&&"vnumber-in"!=this.link.schema&&"ivr"!==this.link.schema&&"hangup"!==this.link.schema}},watch:{hoverProp(){this.hover=this.hoverProp},link:{handler(){this.forceUpdate()},deep:!0},getItemScenario:{handler(){setTimeout((()=>{this.forceUpdate()}),200)},deep:!0}},methods:{toggleSwappedMode(){this.$store.commit("isSwappedModeMutation",!this.getIsSwappedMode)},swappedItems(){this.$store.dispatch("swapItems",this.link)},reorderHandler(e){e.apply(this.link.next),this.$store.dispatch("updateExistingScenarioItem",this.link),this.forceUpdate()},forceUpdate(){this.$nextTick((()=>{this.$forceUpdate()}))},mouseoverHandler(){0===this.counter&&(this.hover=!0)},mouseleaveHandler(){0===this.counter&&(this.hover=!1)},addNewItemHandler(){this.canToAddChildItem&&this.addItem(this.link)},getTitleItem(e){switch(e.schema){case"vnumber-in":return{text:"V-Numbers",icon:"light"===this.theme?this.icon.vnumberInWhite:this.icon.vnumberInBlack};case"hangup":return{text:"Hangup",icon:"light"===this.theme?this.icon.hangupIconWhite:this.icon.hangupIcon};case"ivr":return{text:"IVR",icon:"light"===this.theme?this.icon.ivrIconWhite:this.icon.ivrIconBlack};case"wait":return{text:"Wait",icon:"light"===this.theme?this.icon.waitIconWhite:this.icon.waitIconBlack};case"announcement":return{text:"Announcement",icon:"light"===this.theme?this.icon.announcmentIconWhite:this.icon.announcmentIconBlack};case"queue":return e.options.name?{text:`${e.options.name.length>6?e.options.name.slice(0,6)+"...":e.options.name} (${e.options.number})`,icon:"light"===this.theme?this.icon.queueIconWhite:this.icon.queueIconBlack}:{text:"",icon:"light"===this.theme?this.icon.queueIconWhite:this.icon.queueIconBlack};case"dial":if(this.getGlobalUsersList)for(let t=0;t<this.getGlobalUsersList.length;t++){if(this.getGlobalUsersList[t].internalNumber===e.options.number)return{text:`${this.getGlobalUsersList[t].name?.length>7?this.getGlobalUsersList[t].name.slice(0,7)+"...":this.getGlobalUsersList[t].name} (${e.options.number})`,icon:"light"===this.theme?this.icon.dialWhite:this.icon.dialBlack};if(!e.options.number)return{text:"",icon:"light"===this.theme?this.icon.dialWhite:this.icon.dialBlack}}return{text:`dial (${e.options.number})`,icon:"light"===this.theme?this.icon.dialWhite:this.icon.dialBlack};default:return{text:"",icon:""}}},addItem(e){this.$store.dispatch("addItemScen",e)},chooseItem(e){if(e?.category===this.getItemScenario?.category)return this.$store.dispatch("setShowConfig",null),this.$store.dispatch("setItemScenario",null),!1;0===this.counter?this.$store.dispatch("setShowConfig","vnumber-in"):this.$store.dispatch("setShowConfig",e.schema),this.$store.dispatch("setItemScenario",e)},calculateRelativePos(e,t){const i=e.getBoundingClientRect(),s=t.getBoundingClientRect(),n={};return n.top=s.top-i.top,n.right=s.right-i.right,n.bottom=s.bottom-i.bottom,n.left=s.left-i.left,n},calculatePath(e){if(!this.$refs.dropList?.$children[0]?.$children[e])return"";const t=this.calculateRelativePos(this.$el,this.$refs.dropList.$children[0]?.$children[e].$el);return`M${this.itemWidth},${this.itemHeight/2}\n              C${this.itemWidth+this.gapVertival/2},${this.itemHeight/2}\n              ${this.itemWidth+this.gapHorizontal/2},${t.top+this.itemHeight/2}\n              ${this.itemWidth+this.gapHorizontal},${t.top+this.itemHeight/2} `},mountedItem(){this.renderPaths=!0}},mounted(){this.$emit("mountedItemProp")}},L=P,T=i(1001),$=(0,T.Z)(L,a,r,!1,null,"15e0915e",null),O=$.exports,F=function(){var e=this,t=e._self._c;return t("ConfigurationWrapper",{attrs:{title:"Queue Configuration",isRemovedItem:e.isRemovedItem,ivrKey:e.getIVRKey}},[t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.hide,expression:"hide"}],staticClass:"body",on:{click:function(t){e.hideListOptions(),e.indexFilter="false"}}},[t("ChooseItemSchemeComponent",{attrs:{title:"Select type",currentSchemeType:"queue",currentSchemeTitle:"Queue",canToggleShowList:!0,ivrKey:e.getIVRKey},on:{setItemScheme:e.setType},scopedSlots:e._u([{key:"ivr-key",fn:function(){return[e.getItemScenario.extra&&e.getItemScenario.extra.hasOwnProperty("ivr")?t("IVRKeyInput",{attrs:{valueFromStore:e.getIVRKey,propertyName:"extra.ivr"},on:{updateItem:e.updateItem}}):e._e()]},proxy:!0},{key:"config",fn:function(){return[t("div",{staticClass:"options-block"},[t("label",{ref:"queue",staticClass:"options-label",on:{click:function(t){e.indexFilter="queue"}}},[t("span",{staticClass:"options-title"},[e._v("Please select a queue")]),t("input",{staticClass:"input-field num",attrs:{type:"text"},domProps:{value:e.inputUserValue},on:{input:function(t){return e.searcQueues(t.target.value)}}}),t("span",{staticClass:"triangle",class:{"rotate-arrow":"queue"===e.showOption},on:{click:function(t){return e.setShowList("queue")}}},[t("img",{attrs:{src:i(97646),alt:"select"}})]),t("DropdownList",{directives:[{name:"show",rawName:"v-show",value:"queue"===e.showOption,expression:"showOption === 'queue'"}],attrs:{classNameList:"list-related-numbers",dataList:e.getGlobalQueuesList,classNameItemComputed:t=>t.internalNumber===e.queue.internalNumber?"active-item":"",itemText:e=>`${e.name} ${e.internalNumber}`},on:{scrollFunc:t=>e.funScroll(t),clickFunc:t=>e.chooseQueue(t)}})],1)]),t("InputTimeBlock",{attrs:{title:"Please select a max dial time",valueFromStore:e.getItemScenario.options.maxWait,propertyName:"options.maxWait"},on:{updateItem:e.updateItem}}),t("SwitchBlock",{attrs:{title:"Change MOH",valueFromStore:e.getItemScenario.options.moh,propertyName:"options.queueMoh"},on:{updateItem:e.updateItem}})]},proxy:!0}])})],1)])},V=[],R=i(39132),M=i(68956),B=i.n(M),D=i(3197),A=function(){var e=this,t=e._self._c;return t("div",{staticClass:"configuration-block"},[t("div",{staticClass:"header"},[t("div",{staticClass:"left-sector"},[t("img",{staticClass:"arrow",class:{"arrow-top":!e.full},attrs:{src:i(15238)},on:{click:function(t){e.full=!e.full}}}),t("span",{staticClass:"header-title"},[e._v(e._s(e.getTitle))]),e.isRemovedItem?t("svg",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",arrow:!0,delay:500,duration:500},expression:"{ placement : 'top',  arrow: true, delay : 500, duration: 500 }"}],staticClass:"delete-item",attrs:{width:"13",height:"16",viewBox:"0 0 13 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",content:"Delete"},on:{click:function(t){return e.removeItemCheck()}}},[t("path",{attrs:{d:"M0.879121 14.2222C0.879121 15.2 1.67033 16 2.63736 16H9.67033C10.6374 16 11.4286 15.2 11.4286 14.2222V3.55556H0.879121V14.2222ZM12.3077 0.888889H9.23077L8.35165 0H3.95604L3.07692 0.888889H0V2.66667H12.3077V0.888889Z",fill:"var( --support-line)"}}),t("rect",{attrs:{x:"4.10352",y:"0.410156",width:"4.10256",height:"0.410256",fill:"#276899"}}),t("rect",{attrs:{x:"2.46289",y:"4.92334",width:"0.820513",height:"9.4359",fill:"#276899"}}),t("rect",{attrs:{x:"5.74023",y:"4.92334",width:"0.820513",height:"9.4359",fill:"#276899"}}),t("rect",{attrs:{x:"9.02539",y:"4.92334",width:"0.820513",height:"9.4359",fill:"#276899"}})]):e._e()])]),e.full?t("div",[e._t("default")],2):e._e()])},W=[],H=i(25223),K={name:"ConfigurationWrapper",props:["title","isRemovedItem","ivrKey"],data(){return{full:!0,confirmationConfig:{execute:()=>this.confirmationExecute(),executeBtnText:"Confirm",cancel:()=>this.closeModalConfirmation(),cancelBtnText:"Close",titleText:"Confirmation delete",textConfirmation:"Are you sure you want to remove an element that has children?"}}},computed:{...(0,x.Se)(["getScenario","getItemScenario"]),getTitle(){return"ivr"===this.parentItem()?.schema?`IVR ${this.title}`:this.title}},methods:{parentItem(){return(0,H.fD)(this.getScenario.scenario,this.getItemScenario)},clearStore(){this.$store.dispatch("setItemScenario",null),this.$store.dispatch("setShowConfig",null),this.closeModalConfirmation()},confirmToDeleteBranch(){return this.getItemScenario.next?.length?this.$store.commit("confirmationMutation",this.setConfirmationConfigToDeleteBranch()):this.deleteBranch()},setConfirmationConfigToChooseTypeOfDelete(){return this.confirmationConfig={execute:()=>this.confirmToDeleteBranch(),executeBtnText:"Branch",cancel:()=>this.deleteCurrentItem(),cancelBtnText:"Current link",titleText:"Confirmation delete",textConfirmation:"Would you like to remove ?"}},setConfirmationConfigToDeleteBranch(){return this.confirmationConfig={execute:()=>this.deleteBranch(),executeBtnText:"Confirm",cancel:()=>this.closeModalConfirmation(),cancelBtnText:"Close",titleText:"Confirmation delete",textConfirmation:"Are you sure you want to remove an element that has children?"}},deleteBranch(){this.$store.dispatch("setDeleteBranch",this.getItemScenario),this.clearStore()},deleteCurrentItem(){this.$store.dispatch("setDeleteItem",this.getItemScenario),this.clearStore()},removeItemCheck(){return this.getItemScenario.next?.length&&"ivr"!==this.getItemScenario.schema?this.$store.commit("confirmationMutation",this.setConfirmationConfigToChooseTypeOfDelete()):this.getItemScenario.next?.length&&"ivr"===this.getItemScenario.schema?this.$store.commit("confirmationMutation",this.setConfirmationConfigToDeleteBranch()):this.deleteBranch()},closeModalConfirmation(){this.$store.commit("confirmationMutation",null)}}},U=K,Z=(0,T.Z)(U,A,W,!1,null,"4a99c7d4",null),q=Z.exports,E=function(){var e=this,t=e._self._c;return t("div",{staticClass:"options-block"},[t("div",{staticClass:"left-section"},[t("span",{staticClass:"options-title"},[e._v(e._s(e.title))]),t("div",{staticClass:"btn-content-wrapper"},[t("button",{staticClass:"toggle-btn",class:{active:e.showList},on:{click:e.toggleShowList}},[t("img",{attrs:{src:i(50339)}})]),e.getCurrentItem[0]?t("span",{staticClass:"current-item-block",class:{active:!e.showList}},[t("img",{staticClass:"current-item-icon",attrs:{src:e.getCurrentItem[0].icon()}}),t("span",{staticClass:"current-item-title"},[e._v(e._s(e.getCurrentItem[0].title))])]):e._e()]),e._t("ivr-key")],2),t("div",{staticClass:"right-section"},[e.showList?t("ul",{staticClass:"list",style:{width:e.calcListWidth}},e._l(e.getListOfSchemes,(function(i,s){return t("li",{key:s,staticClass:"list-item",on:{click:function(t){return e.setScheme(i.type)}}},[t("img",{staticClass:"item-icon",attrs:{src:i.icon()}}),t("span",{staticClass:"item-title"},[e._v(e._s(i.title))])])})),0):e._t("config")],2)])},J=[],G=(i(18370),i(93408),i(59687),i(80374),{name:"ChooseItemSchemeComponent",props:["title","setItemScheme","currentSchemeType","currentSchemeTitle","ivrKey","showListProp","canToggleShowList"],data(){return{showList:!!this.showListProp,listOfSchemes:[{type:"dial",title:"Agent",icon:()=>"dark"===this.theme?m:h},{type:"announcement",title:"Announcement",icon:()=>"dark"===this.theme?C:y},{type:"ivr",title:"IVR",icon:()=>"dark"===this.theme?v:S},{type:"wait",title:"Wait",icon:()=>"dark"===this.theme?g:f},{type:"queue",title:"Queue",icon:()=>"dark"===this.theme?p:d},{type:"hangup",title:"Hangup",icon:()=>"dark"===this.theme?b:I}]}},computed:{...(0,x.Se)(["theme"]),getListOfSchemes(){return this.listOfSchemes.filter((e=>"hangup"===e.type?["invalid","timeout"].includes(this.ivrKey)&&e.type!==this.currentSchemeType:e.type!==this.currentSchemeType))},getCurrentItem(){return this.listOfSchemes.filter((e=>e.type===this.currentSchemeType))},calcListWidth(){return this.getListOfSchemes.length%2===0?"625px":"825px"}},methods:{toggleShowList(){this.canToggleShowList&&(this.showList=!this.showList)},setScheme(e){this.$emit("setItemScheme",e),this.showList=!1}}}),Q=G,z=(0,T.Z)(Q,E,J,!1,null,"278a6782",null),Y=z.exports,X=function(){var e=this,t=e._self._c;return t("div",{staticClass:"options-block"},[t("label",{staticClass:"options-label"},[t("span",{staticClass:"options-title"},[e._v(e._s(e.title))]),t("span",{staticClass:"time-block"},[t("input",{staticClass:"input-field time",attrs:{type:"number",maxlength:"5"},domProps:{value:e.getDialTime},on:{change:function(t){return e.setDialTime(t.target.value)}}}),t("span",{staticClass:"minSec",on:{click:function(t){return e.setMinSec()}}},[e._v(e._s(e.minSec))])])])])},j=[],ee={name:"InputTimeBlock",props:["title","valueFromStore","updateItem","propertyName"],data(){return{minSec:"sec"}},computed:{...(0,x.Se)(["getItemScenario"]),getDialTime(){return"sec"===this.minSec?this.valueFromStore:(JSON.parse(JSON.stringify(this.valueFromStore||0))/60).toFixed(0)}},methods:{setDialTime(e){return"sec"===this.minSec?this.setChanges(e):this.setChanges(60*JSON.parse(JSON.stringify(e)))},setMinSec(){this.minSec="min"===this.minSec?"sec":"min"},setChanges(e){this.$emit("updateItem",this.propertyName,+e)}}},te=ee,ie=(0,T.Z)(te,X,j,!1,null,"52aaf5e6",null),se=ie.exports,ne=i(51579),ae=i.n(ne),re=function(){var e=this,t=e._self._c;return t("div",{staticClass:"switch-block-wrapper"},[t("span",{staticClass:"options-title"},[e._v(e._s(e.title))]),t("CustomSwitch",{attrs:{value:e.valueFromStore},on:{updateItem:e.changeItem}})],1)},oe=[],le=function(){var e=this,t=e._self._c;return t("label",{staticClass:"switch"},[t("input",{attrs:{type:"checkbox"},domProps:{checked:e.value},on:{input:function(t){return t.preventDefault(),e.toggleTheme.apply(null,arguments)}}}),t("span",{staticClass:"slider round"})])},ce=[],ue={name:"CustomSwitch",props:["value","updateItem"],methods:{toggleTheme(){this.$emit("updateItem",!this.value)}}},me=ue,he=(0,T.Z)(me,le,ce,!1,null,"06f7d55e",null),pe=he.exports,de={name:"SwitchBlock",props:["title","valueFromStore","updateItem","propertyName"],methods:{changeItem(e){this.$emit("updateItem",this.propertyName,e)}},components:{CustomSwitch:pe}},ge=de,fe=(0,T.Z)(ge,re,oe,!1,null,"1dfcc60c",null),ve=fe.exports,Se=function(){var e=this,t=e._self._c;return t("div",{staticClass:"options-block"},[t("label",{staticClass:"options-label"},[t("span",{staticClass:"options-title"},[e._v("Selection key")]),t("input",{staticClass:"input-field time",class:{invalid:!e.valid},attrs:{maxlength:"5",readonly:e.isReadonly},domProps:{value:e.valueFromStore},on:{change:function(t){return e.changeInputHandler(t.target.value)}}}),e.valid?e._e():t("span",{staticClass:"ivr-key-text-error"},[e._v("Invalid key")])])])},Ce=[],ye={name:"IVRKeyInput",props:["valueFromStore","updateItem","propertyName"],data(){return{valid:!0}},computed:{isReadonly(){const e=["invalid","timeout"];return e.includes(this.valueFromStore)}},methods:{changeInputHandler(e){this.validateKey(e)&&this.$emit("updateItem",this.propertyName,e)},validateKey(e){return/^[0-9*#]+$/.test(e)?(this.valid=!0,!0):(this.valid=!1,!1)}}},be=ye,Ie=(0,T.Z)(be,Se,Ce,!1,null,"2f085adb",null),we=Ie.exports,Ne={name:"queueConfiguration",components:{DropdownList:R.Z,ConfigurationWrapper:q,ChooseItemSchemeComponent:Y,InputTimeBlock:se,SwitchBlock:ve,IVRKeyInput:we},data(){return{showOption:"",queue:{},type:"Dial Queue/Agent",indexFilter:"",perPage:9,name:"",timer:null,unsubscribe:()=>{}}},computed:{...(0,x.Se)(["getGlobalQueuesList","getItemScenario","getShowConfig","getPaginatorQueues"]),inputUserValue(){return"queue"===this.showOption?this.name:this.queue.name?`${this.queue.name} ( ${this.queue.internalNumber} )`:""},isRemovedItem(){return!["invalid","timeout"].includes(this.getItemScenario?.extra?.ivr)},getIVRKey(){return this.getItemScenario?.extra?.ivr??""}},methods:{searcQueues(e){this.name=e,clearTimeout(this.timer),this.timer=setTimeout((()=>this.fetch()),800)},funScroll({target:e}){e.clientHeight+e.scrollTop===e.scrollHeight&&this.getPaginatorQueues.paginator.count>this.perPage&&(this.perPage+=9,this.fetch())},fetch(){this.$store.dispatch("setGlobalQueuesList",{peerPage:this.perPage,sort:"name",order:"asc",search:this.name})},chooseQueue(e){this.updateItem("options.name",e.name),this.updateItem("options.number",e.internalNumber),this.setOptions("queue",e)},setShowList(e){this.showOption===e?this.showOption="":this.showOption=e,"queue"===e&&this.fetch()},setOptions(e,t){this.showOption="",this[e]=t},hideListOptions(){(0,D.O)(this,this.indexFilter,this.$refs)},hide(){this.showOption=""},setType(e){this.$store.dispatch("setShowConfig",e),this.$store.dispatch("updateExistingScenarioItem",{...this.getItemScenario,schema:e})},updateItem(e,t){this.$store.dispatch("updateExistingScenarioItem",ae().set({...this.getItemScenario,schema:"queue"},e,t))},setQueue(){this.queue={name:this.getItemScenario?.options?.name||"",internalNumber:this.getItemScenario?.options?.number}}},mounted(){this.setQueue(),this.unsubscribe=this.$store.subscribe((e=>{"addItemScenMutation"===e.type?this.queue={}:"setItemMutation"===e.type&&"queue"===this.getShowConfig&&this.setQueue()})),this.popupItem=this.$el.children[1]},beforeDestroy(){this.unsubscribe()},directives:{ClickOutside:B()}},ke=Ne,xe=(0,T.Z)(ke,F,V,!1,null,"52cda64b",null),Pe=xe.exports,Le=function(){var e=this,t=e._self._c;return t("ConfigurationWrapper",{attrs:{title:"Dial Configuration",isRemovedItem:e.isRemovedItem,ivrKey:e.getIVRKey}},[t("div",{staticClass:"body"},[t("span",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.hide,expression:"hide"}],ref:"clickOutside",staticStyle:{display:"flex"},on:{click:function(t){e.hideListOptions(),e.indexFilter="false"}}},[t("ChooseItemSchemeComponent",{attrs:{title:"Select type",currentSchemeType:"dial",currentSchemeTitle:"Dial",ivrKey:e.getIVRKey,canToggleShowList:!0},on:{setItemScheme:e.setType},scopedSlots:e._u([{key:"ivr-key",fn:function(){return[e.getItemScenario.extra&&e.getItemScenario.extra.hasOwnProperty("ivr")?t("IVRKeyInput",{attrs:{valueFromStore:e.getIVRKey,propertyName:"extra.ivr"},on:{updateItem:e.updateItem}}):e._e()]},proxy:!0},{key:"config",fn:function(){return[t("div",{staticClass:"options-block"},[t("label",{ref:"user",staticClass:"options-label",on:{click:function(t){e.indexFilter="user"}}},[t("span",{staticClass:"options-title"},[e._v("Select Agent/Queue")]),t("input",{staticClass:"input-field num",attrs:{type:"text"},domProps:{value:e.inputUserValue},on:{input:function(t){return e.searcUsers(t.target.value)}}}),t("span",{staticClass:"triangle",class:{"rotate-arrow":"user"===e.showOption},on:{click:function(t){return e.toggleShowList("user")}}},[t("img",{attrs:{src:i(97646),alt:"select"}})]),t("DropdownList",{directives:[{name:"show",rawName:"v-show",value:"user"===e.showOption,expression:"showOption === 'user'"}],attrs:{classNameList:"list-related-numbers",dataList:e.getGlobalUsersList,classNameItemComputed:t=>t.internalNumber===e.user.internalNumber?"active-item":"",itemText:e=>`${e.name} ${e.internalNumber}`},on:{scrollFunc:t=>e.funScroll(t),clickFunc:t=>e.userClickHandler(t)}})],1)]),t("SwitchBlock",{attrs:{title:"Change MOH",valueFromStore:e.getItemScenario.options.moh,propertyName:"options.moh"},on:{updateItem:e.updateItem}})]},proxy:!0}])})],1)])])},Te=[],$e={name:"dialConfiguration",components:{DropdownList:R.Z,ConfigurationWrapper:q,ChooseItemSchemeComponent:Y,SwitchBlock:ve,IVRKeyInput:we},data(){return{type:"Dial Queue/Agent",showOption:"",user:{},indexFilter:"",perPage:9,timer:null,name:"",count:10}},computed:{...(0,x.Se)(["getGlobalUsersList","getItemScenario","getPaginatorUsers"]),inputUserValue(){return"user"===this.showOption?this.name:this.user.name?`${this.user.name} ( ${this.user.internalNumber} )`:""},isRemovedItem(){return!["invalid","timeout"].includes(this.getItemScenario?.extra?.ivr)},getIVRKey(){return this.getItemScenario?.extra?.ivr??""}},methods:{setType(e){this.$store.dispatch("setShowConfig",e),this.$store.dispatch("updateExistingScenarioItem",{...this.getItemScenario,schema:e})},searcUsers(e){this.name=e,clearTimeout(this.timer),this.timer=setTimeout((()=>this.fetch()),800)},funScroll({target:e}){e.clientHeight+e.scrollTop===e.scrollHeight&&this.getPaginatorUsers.paginator.count>this.perPage&&(this.perPage+=9,this.fetch())},fetch(){this.$store.dispatch("globalUsersListRequest",{peerPage:this.perPage,sort:"",page:1,search:this.name})},hideListOptions(){(0,D.O)(this,this.indexFilter,this.$refs)},hide(){this.showOption=""},setOptions(e,t){this[e]=t,this.showOption=""},userClickHandler(e){this.setOptions("user",e),this.updateItem("options.number",e.internalNumber)},updateItem(e,t){this.$store.dispatch("updateExistingScenarioItem",ae().set({...this.getItemScenario,schema:"dial"},e,t))},toggleShowList(e){this.showOption===e?this.showOption="":this.showOption=e},setUser(){this.user={},this.getGlobalUsersList.forEach((e=>{e.internalNumber===this.getItemScenario?.options?.number&&(this.user=e)}))}},mounted(){this.setUser(),this.$store.subscribe((e=>{"addItemScenMutation"===e.type?this.user={}:"setItemMutation"===e.type&&this.setUser()})),this.popupItem=this.$refs.clickOutside},directives:{ClickOutside:B()}},Oe=$e,_e=(0,T.Z)(Oe,Le,Te,!1,null,"e13ce460",null),Fe=_e.exports,Ve=function(){var e=this,t=e._self._c;return t("ConfigurationWrapper",{attrs:{title:"V-Number Configuration",isRemovedItem:!1}},[t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.hide,expression:"hide"}],staticClass:"body",on:{click:function(t){e.hideListOptions(),e.indexFilter="false"}}},[t("div",{staticClass:"left-sector sector"},[t("div",{staticClass:"filters"},[t("div",{staticClass:"options-block"},[t("label",{ref:"leftNumber",staticClass:"options-label",on:{click:function(t){e.indexFilter="leftNumber"}}},[t("span",{staticClass:"options-title"},[e._v("V-Number")]),t("div",{staticClass:"vnumber-block"},[t("input",{staticClass:"input-field type-vnumber",attrs:{type:"text",readonly:""},domProps:{value:e.filterParams.allNumbers.vNumber.key}}),t("span",{staticClass:"triangle",class:{"rotate-arrow":"filterParams.allNumbers.vNumber.key"===e.showOption},on:{click:function(t){return e.toggleVisible("filterParams.allNumbers.vNumber.key")}}},[t("img",{attrs:{src:i(97646),alt:"select"}})]),t("DropdownList",{directives:[{name:"show",rawName:"v-show",value:"filterParams.allNumbers.vNumber.key"===e.showOption,expression:"showOption === 'filterParams.allNumbers.vNumber.key'"}],attrs:{classNameList:"list-related-numbers vnumber-list",dataList:e.VNumbersTypeValues,itemText:e=>e},on:{clickFunc:t=>e.setFiltersParam("allNumbers",t,"object")}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.filterParams.allNumbers.vNumber.value,expression:"filterParams.allNumbers.vNumber.value"}],staticClass:"input-field enter-vnumber",attrs:{type:"text",placeholder:"Enter numbers"},domProps:{value:e.filterParams.allNumbers.vNumber.value},on:{input:function(t){t.target.composing||e.$set(e.filterParams.allNumbers.vNumber,"value",t.target.value)}}})],1)])]),t("div",{staticClass:"options-block country-block"},[t("label",{ref:"LeftCountries",staticClass:"options-label",on:{click:function(t){e.indexFilter="LeftCountries"}}},[e._v("Countries: "),t("input",{staticClass:"input-field",attrs:{type:"text",placeholder:"Enter Country"},domProps:{value:e.getCountries.left},on:{input:function(t){e.getCountries={value:t.target.value,key:"leftFilter"}},focus:function(t){e.showOption}}}),t("span",{staticClass:"triangle",class:{"rotate-arrow":"showCountry"===e.showOption},on:{click:function(t){return e.toggleVisible("showCountry")}}},[t("img",{attrs:{src:i(97646),alt:"select"}})]),t("DropdownList",{directives:[{name:"show",rawName:"v-show",value:"showCountry"===e.showOption,expression:"showOption === 'showCountry'"}],attrs:{classNameList:"list-related-numbers",dataList:e.countriesList.left.getCountries.filter((t=>-1!==t.country.toLowerCase().indexOf(e.countrySearch.leftFilter.toLowerCase()))),itemText:e=>e.country,classNameItemComputed:t=>e.filterParams.allNumbers.countries.filter((e=>e.country===t.country)).length?"choosed":"",contentTippyCondition:e=>e.country.length>13,clickFuncAll:()=>{e.setFiltersParam("allNumbers",!1,"array",e.getCountry),e.chooseCountry(null,"left")}},on:{clickFunc:t=>{e.setFiltersParam("allNumbers",t,"array"),e.chooseCountry(t,"left")}}})],1)]),t("div",{staticClass:"options-block description-block"},[t("label",{staticClass:"options-label"},[t("span",{staticClass:"options-title"},[e._v("Description")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.filterParams.allNumbers.description,expression:"filterParams.allNumbers.description"}],staticClass:"input-field",attrs:{type:"text",placeholder:"Enter Description"},domProps:{value:e.filterParams.allNumbers.description},on:{input:function(t){t.target.composing||e.$set(e.filterParams.allNumbers,"description",t.target.value)}}})])]),t("div",{staticClass:"options-block status-block"},[t("label",{ref:"leftStatus",staticClass:"options-label",on:{click:function(t){e.indexFilter="leftStatus"}}},[t("span",{staticClass:"options-title"},[e._v("Status")]),t("input",{staticClass:"input-field",attrs:{type:"text",readonly:"",placeholder:"Used"},domProps:{value:e.filterParams.allNumbers.status}}),t("span",{staticClass:"triangle",class:{"rotate-arrow":"usedAll"===e.showOption},on:{click:function(t){return e.toggleVisible("usedAll")}}},[t("img",{attrs:{src:i(97646),alt:"select"}})]),t("ul",{directives:[{name:"show",rawName:"v-show",value:"usedAll"===e.showOption,expression:"showOption === 'usedAll'"}],staticClass:"list-related-numbers status-list"},[t("li",{class:{choosed:"Used"===e.filterParams.allNumbers.status},on:{click:function(t){return e.setFiltersParam("allNumbers","Used","status")}}},[e._v("Used")]),t("li",{class:{choosed:"Not used"===e.filterParams.allNumbers.status},on:{click:function(t){return e.setFiltersParam("allNumbers","Not used","status")}}},[e._v("Not used")])])])]),t("span",{staticClass:"clear-btn",on:{click:function(t){return e.clearFilters("allNumbers")}}},[t("img",{attrs:{src:i(72775)}})])]),t("div",{staticClass:"vnumbers"},[t("ul",{ref:"list",staticClass:"vnumbers-list",on:{scroll:e.funScroll}},e._l(e.relatedNumbersFilter.left,(function(s,n){return t("li",{key:n,staticClass:"vnumber-item"},[t("img",{staticClass:"flag",attrs:{src:s.flag}}),t("span",{staticClass:"vnumber-number"},[e._v(" "+e._s(s.number)+" "),t("span",{staticClass:"vnumber-description ellipsis"},[e._v(e._s(s.description))])]),e.selectedNumbers.filter((e=>e.number==s.number)).length?t("span",{staticClass:"vnumber-btn-span"},[t("img",{attrs:{src:i(20197)}})]):e.numbersUsed.filter((e=>e.number==s.number)).length?t("span",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",arrow:!0,delay:200,duration:500},expression:"{ placement : 'top',  arrow: true, delay : 200, duration: 500 }"}],staticClass:"vnumber-btn-span vnumber-btn-all",attrs:{content:"This number is currently used in other route"},on:{click:function(t){t.stopPropagation(),e.showConfirmation(),e.findNumber(s)}}},[t("img",{attrs:{src:i(55977)}})]):t("img",{staticClass:"vnumber-btn",attrs:{src:i(65257)},on:{click:function(t){return e.addVNumber(s)}}})])})),0)])]),t("span",{staticClass:"arrows"},[t("svg",{attrs:{width:"66",height:"66",viewBox:"0 0 66 66",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{d:"M65 17.0005C65 14.7914 63.2092 13.0006 61.0001 13.0006H15.1797L20.5496 7.82879C22.1693 6.26484 22.1693 3.73691 20.5496 2.17296C18.9257 0.609012 16.2968 0.609012 14.6771 2.17296L2.21789 14.1726C0.594037 15.7365 0.594037 18.2645 2.21789 19.8284L14.6771 31.828C15.487 32.608 16.5502 33 17.6134 33C18.6765 33 19.7397 32.608 20.5496 31.828C22.1693 30.2641 22.1693 27.7362 20.5496 26.1722L15.1797 21.0004H61.0001C63.2092 21.0004 65 19.2096 65 17.0005Z",fill:"white","fill-opacity":"0.1"}}),t("path",{attrs:{d:"M51.3229 34.173C49.699 32.609 47.0743 32.609 45.4504 34.173C43.8266 35.7369 43.8266 38.2648 45.4504 39.8288L50.8203 45.0006H4.99988C2.79081 45.0006 1 46.7914 1 49.0005C1 51.2096 2.79081 53.0004 4.99988 53.0004H50.8203L45.4504 58.1722C43.8266 59.7362 43.8266 62.2641 45.4504 63.828C46.2603 64.608 47.3234 65 48.3866 65C49.4498 65 50.513 64.608 51.3229 63.828L63.7821 51.8284C65.406 50.2645 65.406 47.7365 63.7821 46.1726L51.3229 34.173Z",fill:"white","fill-opacity":"0.1"}}),t("path",{staticClass:"stroke-arrow",attrs:{d:"M65 17.0005C65 14.7914 63.2092 13.0006 61.0001 13.0006H15.1797L20.5496 7.82879C22.1693 6.26484 22.1693 3.73691 20.5496 2.17296C18.9257 0.609012 16.2968 0.609012 14.6771 2.17296L2.21789 14.1726C0.594037 15.7365 0.594037 18.2645 2.21789 19.8284L14.6771 31.828C15.487 32.608 16.5502 33 17.6134 33C18.6765 33 19.7397 32.608 20.5496 31.828C22.1693 30.2641 22.1693 27.7362 20.5496 26.1722L15.1797 21.0004H61.0001C63.2092 21.0004 65 19.2096 65 17.0005Z","stroke-width":"2"}}),t("path",{staticClass:"stroke-arrow",attrs:{d:"M51.3229 34.173C49.699 32.609 47.0743 32.609 45.4504 34.173C43.8266 35.7369 43.8266 38.2648 45.4504 39.8288L50.8203 45.0006H4.99988C2.79081 45.0006 1 46.7914 1 49.0005C1 51.2096 2.79081 53.0004 4.99988 53.0004H50.8203L45.4504 58.1722C43.8266 59.7362 43.8266 62.2641 45.4504 63.828C46.2603 64.608 47.3234 65 48.3866 65C49.4498 65 50.513 64.608 51.3229 63.828L63.7821 51.8284C65.406 50.2645 65.406 47.7365 63.7821 46.1726L51.3229 34.173Z","stroke-width":"2"}})])]),t("div",{staticClass:"right-sector sector"},[t("div",{staticClass:"vnumbers"},[t("ul",{staticClass:"vnumbers-list"},e._l(e.relatedNumbersFilter.right,(function(s,n){return t("li",{key:n,staticClass:"vnumber-item"},[t("img",{staticClass:"flag",attrs:{src:s.flag}}),t("span",{staticClass:"vnumber-number"},[e._v(" "+e._s(s.number)+" "),t("span",{staticClass:"vnumber-description ellipsis"},[e._v(e._s(s.description))])]),t("img",{staticClass:"vnumber-btn",attrs:{src:i(55334)},on:{click:function(t){return e.delVNumber(s)}}})])})),0)]),t("div",{staticClass:"filters right-filters"},[t("div",{staticClass:"options-block"},[t("label",{ref:"rightV-Number",staticClass:"options-label",on:{click:function(t){e.indexFilter="rightV-Number"}}},[t("span",{staticClass:"options-title"},[e._v("V-Number")]),t("div",{staticClass:"vnumber-block"},[t("input",{staticClass:"input-field type-vnumber",attrs:{type:"text",readonly:""},domProps:{value:e.filterParams.selectedNumbers.vNumber.key}}),t("span",{staticClass:"triangle",class:{"rotate-arrow":"filterParams.selectedNumbers.vNumber.key"===e.showOption},on:{click:function(t){return e.toggleVisible("filterParams.selectedNumbers.vNumber.key")}}},[t("img",{attrs:{src:i(97646),alt:"select"}})]),t("DropdownList",{directives:[{name:"show",rawName:"v-show",value:"filterParams.selectedNumbers.vNumber.key"===e.showOption,expression:"showOption === 'filterParams.selectedNumbers.vNumber.key'"}],attrs:{classNameList:"list-related-numbers vnumber-list",dataList:e.VNumbersTypeValues,itemText:e=>e},on:{clickFunc:t=>e.setFiltersParam("selectedNumbers",t,"object")}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.filterParams.selectedNumbers.vNumber.value,expression:"filterParams.selectedNumbers.vNumber.value"}],staticClass:"input-field enter-vnumber",attrs:{type:"text",placeholder:"Enter numbers"},domProps:{value:e.filterParams.selectedNumbers.vNumber.value},on:{input:function(t){t.target.composing||e.$set(e.filterParams.selectedNumbers.vNumber,"value",t.target.value)}}})],1)])]),t("div",{staticClass:"options-block country-block"},[t("label",{ref:"rightCountries",staticClass:"options-label",on:{click:function(t){e.indexFilter="rightCountries"}}},[e._v("Countries: "),t("input",{staticClass:"input-field",attrs:{type:"text",placeholder:"Enter Country"},domProps:{value:e.getCountries.right},on:{focus:function(t){e.showOption},input:function(t){e.getCountries={value:t.target.value,key:"rightFilter"}}}}),t("span",{staticClass:"triangle",class:{"rotate-arrow":"showSelectedCountry"===e.showOption},on:{click:function(t){return e.toggleVisible("showSelectedCountry")}}},[t("img",{attrs:{src:i(97646),alt:"select"}})]),t("DropdownList",{directives:[{name:"show",rawName:"v-show",value:"showSelectedCountry"===e.showOption,expression:"showOption === 'showSelectedCountry'"}],attrs:{classNameList:"list-related-numbers",dataList:e.countriesList.right.getCountries.filter((t=>-1!==t.country.toLowerCase().indexOf(e.countrySearch.rightFilter.toLowerCase()))),itemText:e=>e.country,classNameItemComputed:t=>e.filterParams.selectedNumbers.countries.filter((e=>e.country===t.country)).length?"choosed":"",contentTippyCondition:e=>e.country.length>13,clickFuncAll:()=>{e.setFiltersParam("selectedNumbers",!1,"array",e.getCountry),e.chooseCountry(null,"right")}},on:{clickFunc:t=>{e.setFiltersParam("selectedNumbers",t,"array"),e.chooseCountry(t,"right")}}})],1)]),t("div",{staticClass:"options-block description-block"},[t("label",{staticClass:"options-label"},[t("span",{staticClass:"options-title"},[e._v("Description")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.filterParams.selectedNumbers.description,expression:"filterParams.selectedNumbers.description"}],staticClass:"input-field",attrs:{type:"text",placeholder:"Enter Description"},domProps:{value:e.filterParams.selectedNumbers.description},on:{input:function(t){t.target.composing||e.$set(e.filterParams.selectedNumbers,"description",t.target.value)}}})])]),t("span",{staticClass:"clear-btn",on:{click:function(t){return e.clearFilters("selectedNumbers")}}},[t("img",{attrs:{src:i(72775)}})])])])])])},Re=[],Me=i(11107),Be=i(83850),De={name:"VNumberConfiguration",components:{ControlPanel:Me.Z,DropdownList:R.Z,ConfigurationWrapper:q},data(){return{unsubscribeStore:()=>{},showOption:"",user:{},changeItem:{},VNumbersTypeValues:["begin","contain","end","equal"],filterParams:{allNumbers:{vNumber:{key:"begin",value:""},countries:[],description:"",status:""},selectedNumbers:{vNumber:{key:"begin",value:""},countries:[],description:"",status:""}},countrySearch:{leftFilter:"",rightFilter:""},countriesList:{left:{topList:[],bottomList:[],getCountries:[]},right:{topList:[],bottomList:[],getCountries:[]}},selectedNumbers:[],numbersUsed:[],indexFilter:"",number:{},perPage:9,confirmationConfig:{execute:()=>{this.addVNumber(this.number?.number),this.$store.commit("confirmationMutation",null)},executeBtnText:"Confirm",cancel:()=>this.$store.commit("confirmationMutation",null),cancelBtnText:"Close",titleText:"Confirmation",textConfirmation:""}}},watch:{getGlobalExternalNumbers(){this.addFlagToNumber(),this.setNumbersUsed()}},computed:{...(0,x.Se)(["getItemScenario","getInitialList","getScenario","getCountry","getGlobalExternalNumbers","getPaginatorNumbers","getInvolvedNumbers"]),relatedNumbersFilter(){return{left:this.displayNumber(this.getGlobalExternalNumbers,"allNumbers"),right:this.displayNumber(this.selectedNumbers,"selectedNumbers")}},getCountries:{get:function(){return"showCountry"===this.showOption?{left:this.countrySearch.leftFilter,right:this.checkingСountries("selectedNumbers")}:"showSelectedCountry"===this.showOption?{left:this.checkingСountries("allNumbers"),right:this.countrySearch.rightFilter}:this.filterParams.selectedNumbers.countries.length&&this.filterParams.selectedNumbers.countries.length!==this.getCountry.length?this.filterParams.allNumbers.countries.length&&this.filterParams.allNumbers.countries.length!==this.getCountry.length?{left:`countries (${this.filterParams.allNumbers.countries.length})`,right:this.checkingСountries("selectedNumbers")}:{left:"All",right:this.checkingСountries("selectedNumbers")}:{left:this.checkingСountries("allNumbers"),right:"All"}},set:function(e){this.countrySearch[e.key]=e.value}}},methods:{onscroll(){this.$refs.list?.addEventListener("scroll",this.funScroll)},deleteScroll(){this.$refs.list?.removeEventListener("scroll",this.funScroll)},funScroll(){this.$refs.list.clientHeight+this.$refs.list.scrollTop===this.$refs.list.scrollHeight&&this.getPaginatorNumbers.paginator.count>this.perPage&&(this.perPage+=9,this.$store.dispatch("setGlobalExternalNumbers",{peerPage:this.perPage}))},showConfirmation(){this.$store.commit("confirmationMutation",this.confirmationConfig)},textConfirmation(e){return`This number is used in the "<b>${e}</b>" route. V-number can be used only in one incoming routing. Are you sure you want to use this V-number here?`},chooseCountry(e,t){const i=Be.Z.changeCountry(e,this.countriesList[t].topList,this.countriesList[t].bottomList,"country");this.countriesList[t].topList=i.topList,this.countriesList[t].bottomList=i.bottomList,this.countriesList[t].getCountries=i.getCountries},findNumber(e){const t={name:ae().find(this.numbersUsed,{number:e.number}).name,number:e};this.number=t,this.confirmationConfig.textConfirmation=this.textConfirmation(t.name)},displayNumber(e=[],t){let i=JSON.parse(JSON.stringify(e));return i=i.filter((e=>-1!==e.description?.toLowerCase()?.indexOf(this.filterParams[t].description?.toLowerCase()))),0!==this.filterParams[t].countries.length&&(i=i.filter((e=>{let i=!1;return this.filterParams[t].countries.map((t=>{e.iso3===t.iso3&&(i=!0)})),i}))),i=i.filter((e=>this.filterNumber(this.filterParams[t].vNumber,e.number))),"Used"===this.filterParams[t].status?i=i.filter((e=>ae().some(this.numbersUsed,{number:e.number}))):"Not used"===this.filterParams[t].status&&(i=i.filter((e=>!ae().some(this.numbersUsed,{number:e.number})))),i},hideListOptions(){(0,D.O)(this,this.indexFilter,this.$refs)},hide(){this.showOption=""},"checkingСountries"(e){return this.filterParams[e].countries.length&&this.filterParams[e].countries.length!==this.getCountry.length?`countries (${this.filterParams[e].countries.length})`:"All"},filterNumber(e,t){if(!t)return"";const i=t.toString();switch(e.key){case"begin":return i.startsWith(e.value);case"contain":return-1!==i.indexOf(e.value);case"end":return i.endsWith(e.value);case"equal":return i===e.value;default:break}},clearFilters(e){this.filterParams[e].vNumber={key:"begin",value:""},this.filterParams[e].countries=[],this.filterParams[e].description="",this.filterParams[e].status=[]},setFiltersParam(e,t,i,s){switch(i){case"array":t?this.filterParams[e].countries.includes(t)?this.filterParams[e].countries=this.filterParams[e].countries.filter((e=>e!==t)):this.filterParams[e].countries.push(t):this.filterParams[e].countries.length===s.length?this.filterParams[e].countries=[]:this.filterParams[e].countries=s;break;case"object":this.filterParams[e].vNumber.key=t,this.showOption="";break;case"status":this.filterParams[e].status===t?this.filterParams[e].status="":this.filterParams[e].status=t,this.showOption="";break;default:break}},addVNumber(e){this.selectedNumbers.push(e),this.numbersUsed.push({number:e.number,name:this.getScenario.path.slice(1)}),this.addVNumberItem()},toggleVisible(e){this.showOption===e?this.showOption="":this.showOption=e},addVNumberItem(){this.$store.dispatch("updateExistingScenarioItem",ae().set({...this.getItemScenario,schema:"vnumber-in"},"options.externalNumbers",this.selectedNumbers))},delVNumber(e){this.selectedNumbers=this.selectedNumbers.filter((t=>t.number!==e.number)),this.numbersUsed=this.numbersUsed.filter((t=>t.number!==e.number)),this.addVNumberItem()},setNumbersUsed(){this.getInitialList.forEach((e=>{e.scenario?.options.externalNumbers.forEach((t=>{ae().some(this.numbersUsed,{number:t})||this.numbersUsed.push({number:t,name:e.path.slice(1)})}))}))},addFlagToNumber(){this.getGlobalExternalNumbers.forEach((e=>{this.getCountry.forEach((t=>{e.iso3===t.iso3&&(e.flag=t.flag)}))}))},mountedFunc(){this.$store.dispatch("setGlobalExternalNumbers",{peerPage:this.perPage}),this.getScenario.scenario?.options.externalNumbers?this.selectedNumbers=JSON.parse(JSON.stringify(this.getScenario.scenario.options.externalNumbers)):this.selectedNumbers=[]}},mounted(){this.popupItem=this.$el.children[1],this.countriesList.left.getCountries=this.countriesList.right.getCountries=this.countriesList.left.bottomList=this.countriesList.right.bottomList=this.getCountry},created(){this.mountedFunc(),this.unsubscribeStore=this.$store.subscribe((e=>{"newScenarioMutation"===e.type&&this.mountedFunc()}))},beforeDestroy(){this.unsubscribeStore()},directives:{ClickOutside:B()}},Ae=De,We=(0,T.Z)(Ae,Ve,Re,!1,null,"7f7f71ff",null),He=We.exports,Ke=i(35211),Ue=function(){var e=this,t=e._self._c;return t("ConfigurationWrapper",{attrs:{title:"IVR Configuration",isRemovedItem:e.isRemovedItem}},[t("div",{staticClass:"body"},[t("span",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.hide,expression:"hide"}],ref:"clickOutside",staticStyle:{display:"flex"},on:{click:function(t){e.hideListOptions(),e.indexFilter="false"}}},[t("ChooseItemSchemeComponent",{attrs:{title:"Select type",currentSchemeType:"ivr",currentSchemeTitle:"IVR",ivrKey:e.getIVRKey,canToggleShowList:!0},on:{setItemScheme:e.setType},scopedSlots:e._u([{key:"ivr-key",fn:function(){return[e.getItemScenario.extra&&e.getItemScenario.extra.hasOwnProperty("ivr")?t("IVRKeyInput",{attrs:{valueFromStore:e.getIVRKey,propertyName:"extra.ivr"},on:{updateItem:e.updateItem}}):e._e()]},proxy:!0},{key:"config",fn:function(){return[t("div",{staticClass:"section-wrappper"},[t("FileBlock",{attrs:{title:"Main audio",valueFromStore:e.getItemScenario.options.record,propertyName:"options.record"},on:{updateItem:e.updateItem}}),t("div",{staticClass:"bottom-block"},[t("InputBlock",{attrs:{title:"Timeout:",valueFromStore:e.getItemScenario.options.timeout,propertyName:"options.timeout",measure:"sec"},on:{updateItem:e.updateItem}}),t("InputBlock",{attrs:{title:"Wait for digit:",valueFromStore:e.getItemScenario.options.digitsTimeout,propertyName:"options.digitsTimeout",measure:"sec"},on:{updateItem:e.updateItem}})],1)],1),t("div",{staticClass:"section-wrappper horizontal-line"},[t("FileBlock",{attrs:{title:"Timeout audio",valueFromStore:e.getItemScenario.options.timeoutAnnouncement,propertyName:"options.timeoutAnnouncement"},on:{updateItem:e.updateItem}}),t("div",{staticClass:"bottom-block"},[t("InputBlock",{attrs:{title:"Timeout attempts:",valueFromStore:e.getItemScenario.options.timeoutAttempts,propertyName:"options.timeoutAttempts"},on:{updateItem:e.updateItem}})],1)],1),t("div",{staticClass:"section-wrappper horizontal-line"},[t("FileBlock",{attrs:{title:"Invaild audio",valueFromStore:e.getItemScenario.options.invalidAnnouncement,propertyName:"options.invalidAnnouncement"},on:{updateItem:e.updateItem}}),t("div",{staticClass:"bottom-block"},[t("InputBlock",{attrs:{title:"Invaild attempts:",valueFromStore:e.getItemScenario.options.invalidAttempts,propertyName:"options.invalidAttempts"},on:{updateItem:e.updateItem}})],1)],1),t("div",{staticClass:"section-wrappper small-vertical-line"},[t("FileBlock",{attrs:{title:"Repeat audio",valueFromStore:e.getItemScenario.options.repeatAnnouncement,propertyName:"options.repeatAnnouncement"},on:{updateItem:e.updateItem}})],1),t("div",{staticClass:"section-wrappper small-vertical-line"},[t("SwitchBlock",{attrs:{title:"Direct dial",valueFromStore:e.getItemScenario.options.directcall,propertyName:"options.directcall"},on:{updateItem:e.updateItem}})],1)]},proxy:!0}])})],1)])])},Ze=[],qe=function(){var e=this,t=e._self._c;return t("div",{staticClass:"options-block"},[t("label",{staticClass:"options-label"},[t("span",{staticClass:"options-title"},[e._v(e._s(e.title))]),t("input",{staticClass:"input-field time",attrs:{type:"number",maxlength:"5"},domProps:{value:e.valueFromStore},on:{change:function(t){return e.changeInputHandler(t.target.value)}}}),e.measure?t("span",{staticClass:"measure-block"},[e._v(e._s(e.measure))]):e._e()])])},Ee=[],Je={name:"InputBlock",props:["title","valueFromStore","updateItem","propertyName","measure"],methods:{changeInputHandler(e){this.$emit("updateItem",this.propertyName,e)}}},Ge=Je,Qe=(0,T.Z)(Ge,qe,Ee,!1,null,"93353dfc",null),ze=Qe.exports,Ye=function(){var e=this,t=e._self._c;return t("div",{staticClass:"file-block-wrapper"},[t("span",{staticClass:"options-title"},[e._v(e._s(e.title))]),t("div",{staticClass:"file-block"},[t("button",{staticClass:"file-btn",on:{click:function(t){return e.$refs.file.click()}}},[e._v(" "+e._s(e.valueFromStore?e.valueFromStore:"Select file")+" ")]),t("input",{ref:"file",staticClass:"none",attrs:{type:"file",id:"file"},on:{change:e.changeFile}})])])},Xe=[],je={name:"InputTimeBlock",props:["title","valueFromStore","updateItem","propertyName"],data(){return{file:null}},methods:{changeFile(){const e=this.$refs.file.files[0];this.file=e,this.setChanges(e.name)},setChanges(e){this.$emit("updateItem",this.propertyName,e)}}},et=je,tt=(0,T.Z)(et,Ye,Xe,!1,null,"6f1fa99e",null),it=tt.exports,st={name:"IVRConfiguration",components:{DropdownList:R.Z,ConfigurationWrapper:q,ChooseItemSchemeComponent:Y,SwitchBlock:ve,InputTimeBlock:se,InputBlock:ze,FileBlock:it,IVRKeyInput:we},data(){return{type:"ivr",showOption:"",user:{},indexFilter:"",perPage:9,timer:null,name:"",count:10,numberIVR:""}},computed:{...(0,x.Se)(["getGlobalUsersList","getItemScenario","getPaginatorUsers"]),getTimeout(){return this.getItemScenario?.options.timeout},isRemovedItem(){return!["invalid","timeout"].includes(this.getItemScenario?.extra?.ivr)},getIVRKey(){return this.getItemScenario?.extra?.ivr??""}},methods:{setType(e){this.$store.dispatch("setShowConfig",e),this.$store.dispatch("updateExistingScenarioItem",{...this.getItemScenario,schema:e})},hideListOptions(){(0,D.O)(this,this.indexFilter,this.$refs)},hide(){this.showOption=""},updateItem(e,t){this.$store.dispatch("updateExistingScenarioItem",ae().set({...this.getItemScenario,schema:"ivr"},e,t))},toggleShowList(e){this.showOption===e?this.showOption="":this.showOption=e}},mounted(){this.popupItem=this.$refs.clickOutside},directives:{ClickOutside:B()}},nt=st,at=(0,T.Z)(nt,Ue,Ze,!1,null,"6b4a4ad9",null),rt=at.exports,ot=function(){var e=this,t=e._self._c;return t("ConfigurationWrapper",{attrs:{title:"Wait Configuration",isRemovedItem:e.isRemovedItem,ivrKey:e.getIVRKey}},[t("div",{staticClass:"body"},[t("span",{ref:"clickOutside",staticStyle:{display:"flex"}},[t("ChooseItemSchemeComponent",{attrs:{title:"Select type",currentSchemeType:"wait",currentSchemeTitle:"Wait",ivrKey:e.getIVRKey,canToggleShowList:!0},on:{setItemScheme:e.setType},scopedSlots:e._u([{key:"ivr-key",fn:function(){return[e.getItemScenario.extra&&e.getItemScenario.extra.hasOwnProperty("ivr")?t("IVRKeyInput",{attrs:{valueFromStore:e.getIVRKey,propertyName:"extra.ivr"},on:{updateItem:e.updateItem}}):e._e()]},proxy:!0},{key:"config",fn:function(){return[t("InputBlock",{attrs:{title:"Please select a wait time:",valueFromStore:e.getItemScenario.options.second,propertyName:"options.second"},on:{updateItem:e.updateItem}})]},proxy:!0}])})],1)])])},lt=[],ct={name:"WaitConfiguration",components:{DropdownList:R.Z,ConfigurationWrapper:q,ChooseItemSchemeComponent:Y,InputTimeBlock:se,IVRKeyInput:we,InputBlock:ze},computed:{...(0,x.Se)(["getItemScenario"]),isRemovedItem(){return!["invalid","timeout"].includes(this.getItemScenario?.extra?.ivr)},getIVRKey(){return this.getItemScenario?.extra?.ivr??""}},methods:{setType(e){this.$store.dispatch("setShowConfig",e),this.$store.dispatch("updateExistingScenarioItem",{...this.getItemScenario,schema:e})},updateItem(e,t){this.$store.dispatch("updateExistingScenarioItem",_.set({...this.getItemScenario,schema:"wait"},e,t))}}},ut=ct,mt=(0,T.Z)(ut,ot,lt,!1,null,"65fb8824",null),ht=mt.exports,pt=function(){var e=this,t=e._self._c;return t("ConfigurationWrapper",{attrs:{title:"Announcement Configuration",isRemovedItem:e.isRemovedItem,ivrKey:e.getIVRKey}},[t("div",{staticClass:"body"},[t("span",{ref:"clickOutside",staticStyle:{display:"flex"}},[t("ChooseItemSchemeComponent",{attrs:{title:"Select type",currentSchemeType:"announcement",currentSchemeTitle:"Announcement",ivrKey:e.getIVRKey,canToggleShowList:!0},on:{setItemScheme:e.setType},scopedSlots:e._u([{key:"ivr-key",fn:function(){return[e.getItemScenario.extra&&e.getItemScenario.extra.hasOwnProperty("ivr")?t("IVRKeyInput",{attrs:{valueFromStore:e.getIVRKey,propertyName:"extra.ivr"},on:{updateItem:e.updateItem}}):e._e()]},proxy:!0},{key:"config",fn:function(){return[t("FileBlock",{attrs:{title:"Add a new audio file",valueFromStore:e.getItemScenario.options.filename,propertyName:"options.filename"},on:{updateItem:e.updateItem}}),t("SwitchBlock",{attrs:{title:"Change skip",valueFromStore:e.getItemScenario.options.skip,propertyName:"options.skip"},on:{updateItem:e.updateItem}})]},proxy:!0}])})],1)])])},dt=[],gt={name:"AnnouncementConfiguration",components:{DropdownList:R.Z,ConfigurationWrapper:q,ChooseItemSchemeComponent:Y,FileBlock:it,SwitchBlock:ve,IVRKeyInput:we},computed:{...(0,x.Se)(["getItemScenario"]),isRemovedItem(){return!["invalid","timeout"].includes(this.getItemScenario?.extra?.ivr)},getIVRKey(){return this.getItemScenario?.extra?.ivr??""}},methods:{setType(e){this.$store.dispatch("setShowConfig",e),this.$store.dispatch("updateExistingScenarioItem",{...this.getItemScenario,schema:e})},updateItem(e,t){this.$store.dispatch("updateExistingScenarioItem",_.set({...this.getItemScenario,schema:"announcement"},e,t))}}},ft=gt,vt=(0,T.Z)(ft,pt,dt,!1,null,"45d7a2be",null),St=vt.exports,Ct=function(){var e=this,t=e._self._c;return t("ConfigurationWrapper",{attrs:{title:"Hangup Configuration",isRemovedItem:e.isRemovedItem,ivrKey:e.getIVRKey}},[t("div",{staticClass:"body"},[t("span",{ref:"clickOutside",staticStyle:{display:"flex"}},[t("ChooseItemSchemeComponent",{attrs:{title:"Select type",currentSchemeType:"hangup",currentSchemeTitle:"Hangup",ivrKey:e.getIVRKey,canToggleShowList:!0},on:{setItemScheme:e.setType},scopedSlots:e._u([{key:"ivr-key",fn:function(){return[e.getItemScenario.extra&&e.getItemScenario.extra.hasOwnProperty("ivr")?t("IVRKeyInput",{attrs:{valueFromStore:e.getIVRKey,propertyName:"extra.ivr"},on:{updateItem:()=>{}}}):e._e()]},proxy:!0},{key:"config",fn:function(){return["timeout"===e.getIVRKey?t("div",{staticClass:"configuration-wrapper"},[t("FileBlock",{attrs:{title:"Timeout audio",valueFromStore:e.getIVRItem.options.timeoutAnnouncement,propertyName:"options.timeoutAnnouncement"},on:{updateItem:e.updateIVRItem}}),t("div",{staticClass:"bottom-block"},[t("InputBlock",{attrs:{title:"Timeout:",valueFromStore:e.getIVRItem.options.timeout,propertyName:"options.timeout",measure:"sec"},on:{updateItem:e.updateIVRItem}}),t("InputBlock",{attrs:{title:"Wait for digit:",valueFromStore:e.getIVRItem.options.digitsTimeout,propertyName:"options.digitsTimeout",measure:"sec"},on:{updateItem:e.updateIVRItem}}),t("InputBlock",{attrs:{title:"Timeout attempts:",valueFromStore:e.getIVRItem.options.timeoutAttempts,propertyName:"options.timeoutAttempts"},on:{updateItem:e.updateIVRItem}})],1)],1):e._e(),"invalid"===e.getIVRKey?t("div",{staticClass:"configuration-wrapper"},[t("FileBlock",{attrs:{title:"Invaild audio",valueFromStore:e.getIVRItem.options.invalidAnnouncement,propertyName:"options.invalidAnnouncement"},on:{updateItem:e.updateIVRItem}}),t("div",{staticClass:"bottom-block"},[t("InputBlock",{attrs:{title:"Invaild attempts:",valueFromStore:e.getIVRItem.options.invalidAttempts,propertyName:"options.invalidAttempts"},on:{updateItem:e.updateIVRItem}})],1)],1):e._e()]},proxy:!0}])})],1)])])},yt=[],bt={name:"HangupConfiguration",components:{ConfigurationWrapper:q,ChooseItemSchemeComponent:Y,IVRKeyInput:we,InputBlock:ze,FileBlock:it},computed:{...(0,x.Se)(["getItemScenario","getScenario"]),isRemovedItem(){return!["invalid","timeout"].includes(this.getItemScenario?.extra?.ivr)},getIVRItem(){return(0,H.fD)(this.getScenario.scenario,this.getItemScenario)},getIVRKey(){return this.getItemScenario?.extra?.ivr??""}},methods:{setType(e){this.$store.dispatch("setShowConfig",e),this.$store.dispatch("updateParentScenarioItem",{...this.getItemScenario,schema:e,options:{}})},updateIVRItem(e,t){this.$store.dispatch("updateParentScenarioItem",_.set({...this.getIVRItem,schema:"ivr"},e,t))}}},It=bt,wt=(0,T.Z)(It,Ct,yt,!1,null,"55e47959",null),Nt=wt.exports,kt=function(){var e=this,t=e._self._c;return t("ConfigurationWrapper",{attrs:{title:"New element Configuration",isRemovedItem:e.isRemovedItem,ivrKey:e.getIVRKey}},[t("div",{staticClass:"body"},[t("span",{ref:"clickOutside",staticStyle:{display:"flex"}},[t("ChooseItemSchemeComponent",{attrs:{title:"Select type",currentSchemeType:"",currentSchemeTitle:"",ivrKey:"",showListProp:!0,canToggleShowList:!1},on:{setItemScheme:e.setType}})],1)])])},xt=[],Pt={name:"newItemConfiguration",components:{DropdownList:R.Z,ConfigurationWrapper:q,ChooseItemSchemeComponent:Y,InputTimeBlock:se,IVRKeyInput:we},computed:{...(0,x.Se)(["getItemScenario"]),isRemovedItem(){return!["invalid","timeout"].includes(this.getItemScenario?.extra?.ivr)},getIVRKey(){return this.getItemScenario?.extra?.ivr??""}},methods:{setType(e){this.$store.dispatch("setShowConfig",e),this.$store.dispatch("updateExistingScenarioItem",{...this.getItemScenario,schema:e})}}},Lt=Pt,Tt=(0,T.Z)(Lt,kt,xt,!1,null,"1486a406",null),$t=Tt.exports,Ot=i(46319),_t=i(14694),Ft=i(37430),Vt=i(18172),Rt=function(){var e=this,t=e._self._c;return t("ul",{staticClass:"top-tabs"},[t("li",{staticClass:"new"},[t("span",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",arrow:!0,delay:500,duration:500},expression:"{ placement: 'top', arrow: true, delay: 500, duration: 500 }"}],staticClass:"new-scenario",attrs:{content:"Add new scenario"},on:{click:function(t){e.changeMode=!e.changeMode}}},[t("img",{attrs:{src:i(22132),alt:"new"}})])]),t("GrabScrolling",[t("ul",{staticClass:"drop-list"},e._l(e.getListScenarios.filter((e=>2===e.path.split("/").length)),(function(s){return t("li",{directives:[{name:"show",rawName:"v-show",value:!e.deleteScenarios.includes(s.uid),expression:"!deleteScenarios.includes(item.uid)"}],key:s.path,staticClass:"parent-tab",class:{active:e.activeTab.split("/")[1]===s.path.split("/")[1]&&2===e.activeTab.split("/").length,"active-child-item":e.activeTab.split("/")[1]===s.path.split("/")[1]&&e.activeTab.split("/").length}},[t("span",{staticClass:"parent-tab-span"},[t("input",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",arrow:!0,delay:500,duration:500},expression:"{ placement: 'top', arrow: true, delay: 500, duration: 500 }"}],staticClass:"item-input",attrs:{type:"text",maxlength:"16",readonly:e.readonly!==s.uid,content:s.path.split("/")[1]},domProps:{value:s.path.split("/")[1]},on:{dblclick:function(t){return e.changeName(s.uid)},click:function(t){t.stopPropagation(),e.changeActiveScenario((()=>e.setScenario(s)),s)},blur:function(t){e.readonly=""},change:function(t){return e.setName(t.target.value,s)}}})]),e.changeMode?t("span",{staticClass:"delete-scenario",on:{click:function(t){return e.deleteScenario(s,"parent")}}},[t("img",{attrs:{src:i(55334),width:"20",height:"20"}})]):e._e(),e.activeTab.split("/")[1]===s.path.split("/")[1]&&e.activeTab.split("/").length>2?t("svg",{staticClass:"child-scenario-arrow",attrs:{width:"18",height:"9",viewBox:"0 0 18 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{d:"M2 1L8.29289 7.29289C8.68342 7.68342 9.31658 7.68342 9.70711 7.29289L16 1H9H2Z",fill:"#AABAD4",stroke:"#276899"}})]):e._e(),t("NestedScenarioMenuItem",{attrs:{tab:s,changeMode:e.changeMode,getScenario:e.getScenario,name:e.name,activeTab:e.activeTab,listScenarios:e.getListScenarios.filter((t=>3===t.path.split("/").length&&!e.deleteScenarios.includes(t.uid))),readonly:e.readonly},on:{setNewScenarioProp:function(t){e.changeActiveScenario((t=>e.setNewScenario(t)),{})},setReadonlyProp:e.setReadonly,changeActiveScenarioProp:t=>e.changeActiveScenario((()=>e.setScenario(t)),t),setNameProp:e.setName,deleteScenarioProp:e.deleteScenario,changedItemProp:e.changeName}})],1)})),0)]),e.changeMode?t("li",{staticClass:"parent-tab new-scenario-item"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.name.mainName,expression:"name.mainName"}],attrs:{maxlength:"16",placeholder:"Enter name..."},domProps:{value:e.name.mainName},on:{input:function(t){t.target.composing||e.$set(e.name,"mainName",t.target.value)}}}),t("span",{staticClass:"set-name",class:{"disabled-set-name":!e.name.mainName.length},on:{click:function(t){e.changeActiveScenario((()=>e.setNewScenario(e.name.mainName)),{})}}},[t("img",{attrs:{src:i(20197),width:"14",height:"14"}})])]):e._e(),e.changeMode?t("li",{staticClass:"parent-tab duplicate-item",class:{"duplicate-active":e.getScenario},style:{color:e.getDuplicateIconAndTextColor.color},on:{click:e.copyScenario}},[e._v(" Duplicate "),t("img",{attrs:{src:e.getDuplicateIconAndTextColor.icon}})]):e._e()],1)},Mt=[],Bt=i(65053),Dt=i(69746),At=function(){var e=this,t=e._self._c;return e.getScenario&&e.getScenario.path?t("div",{staticClass:"bottom-tabs-block"},[e.tab.path.split("/")[1]===e.getScenario.path.split("/")[1]?t("ul",{staticClass:"bottom-tabs"},[e.changeMode?t("li",{staticClass:"add-bottom-list-item"},[t("span",{staticClass:"add-route-btn-span",class:{"disabled-btn":!e.name.secondaryName.length},on:{click:function(t){t.stopPropagation(),e.setNewScenario(`${e.tab.path.split("/")[1]}/${e.name.secondaryName}`)}}},[e._m(0)])]):e._e(),t("ul",{staticClass:"list"},e._l(e.listScenarios,(function(s){return t("li",{directives:[{name:"show",rawName:"v-show",value:s.path.split("/")[1]===e.activeTab.split("/")[1]||s.path===e.activeTab,expression:"item.path.split('/')[1] === activeTab.split('/')[1] || item.path === activeTab"}],key:s.path,staticClass:"child-tab",class:{activeElement:s.path===e.activeTab}},[t("span",{staticClass:"child-tab-span"},[t("input",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",arrow:!0,delay:500,duration:500},expression:"{ placement: 'top', arrow: true, delay: 500, duration: 500 }"}],staticClass:"item-input",attrs:{type:"text",readonly:e.readonly!==s.uid,maxlength:"16",size:"3",content:s.path.split("/")[2]||"default"},domProps:{value:s.path.split("/")[2]||"default"},on:{dblclick:function(t){return e.changedItem(s.uid)},blur:function(t){return e.setReadonly("")},click:function(t){return t.stopPropagation(),e.changeActiveScenario(s)},change:function(t){return e.setName(t.target.value,s)}}})]),e.changeMode?t("span",{staticClass:"delete-scenario-element",on:{click:function(t){return e.deleteScenario(s,"child")}}},[t("img",{attrs:{src:i(55334),width:"11",height:"11"}})]):e._e()])})),0),e.changeMode?t("li",{staticClass:"child-tab"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.name.secondaryName,expression:"name.secondaryName"}],staticClass:"secondary-input",attrs:{maxlength:"16",placeholder:"  Add new"},domProps:{value:e.name.secondaryName},on:{input:function(t){t.target.composing||e.$set(e.name,"secondaryName",t.target.value)}}})]):e._e()]):e._e()]):e._e()},Wt=[function(){var e=this,t=e._self._c;return t("span",{staticClass:"add-route-btn"},[t("img",{attrs:{src:i(60766)}})])}],Ht={name:"NestedScenarioMenuItem",components:{Drag:k.nc,DropList:k.Rr},props:["tab","changeMode","getScenario","name","setNewScenarioProp","activeTab","listScenarios","readonly","setReadonlyProp","changeActiveScenarioProp","setNameProp","deleteScenarioProp","changedItemProp"],methods:{dragendHandler(e,t){const i=e.native.path;for(const s of i)if(s.classList.contains("top-tabs")){const e="/"+t.path.split("/")[2];return this.$store.dispatch("changeNameOfScenarioAfterDrag",{newName:e,scenario:t})}},setNewScenario(e){this.$emit("setNewScenarioProp",e)},changedItem(e){this.$emit("changedItemProp",e)},setReadonly(e){this.$emit("setReadonlyProp",e)},changeActiveScenario(e){this.$emit("changeActiveScenarioProp",e)},setName(e,t){this.$emit("setNameProp",e,t)},deleteScenario(e,t){this.$emit("deleteScenarioProp",e,t)},reorderHandler(e){console.log(e)}}},Kt=Ht,Ut=(0,T.Z)(Kt,At,Wt,!1,null,"a10c7fba",null),Zt=Ut.exports,qt=function(){var e=this,t=e._self._c;return t("div",{ref:"slider",staticClass:"grab-scrolling-wrapper",class:{active:e.isDown},on:{mousedown:e.mousedownHandler,mouseleave:e.mouseleaveHandler,mouseup:e.mouseupHandler,mousemove:e.mousemoveHandler}},[e._t("default")],2)},Et=[],Jt={name:"GrabScrolling",data(){return{isDown:!1,startX:null,startY:null,scrollLeft:null,scrollTop:null}},methods:{mousedownHandler(e){this.isDown=!0,this.startX=e.pageX-this.$refs.slider.offsetLeft,this.startY=e.pageY-this.$refs.slider.offsetTop,this.scrollLeft=this.$refs.slider.scrollLeft,this.scrollTop=this.$refs.slider.scrollTop},mouseleaveHandler(){this.isDown=!1},mouseupHandler(){this.isDown=!1},mousemoveHandler(e){if(!this.isDown)return;e.preventDefault();const t=e.pageX-this.$refs.slider.offsetLeft,i=e.pageY-this.$refs.slider.offsetTop,s=t-this.startX,n=i-this.startY;this.$refs.slider.scrollLeft=this.scrollLeft-s,this.$refs.slider.scrollTop=this.scrollTop-n}}},Gt=Jt,Qt=(0,T.Z)(Gt,qt,Et,!1,null,"29056be5",null),zt=Qt.exports,Yt={name:"ScenariosMenu",components:{Drag:k.nc,DropList:k.Rr,NestedScenarioMenuItem:Zt,GrabScrolling:zt},props:["getScenario","deleteScenarios","setDeleteScenarios","confirmationConfig","confirmationToDeleteConfig","changeConfirmationConfig","confirmationValue","setConfirmationValue","showApplyBtn","setShowApplyBtn","getListScenarios","getInitialList","setScenarioProp"],data(){return{changeMode:!1,readonly:"",activeTab:"",name:{mainName:"",secondaryName:""},icons:{duplicateIconWhite:Bt,duplicateIconBlue:Dt},listScenarios:[]}},watch:{getScenario(){this.activeTab=this.getScenario?.path??""},getListScenarios:{handler(){this.listScenarios=this.getListScenarios.filter((e=>2===e.path?.split("/").length))},deep:!0}},computed:{...(0,x.Se)(["theme"]),getDuplicateIconAndTextColor(){return"dark"===this.theme||"light"===this.theme&&this.getScenario?{icon:this.icons.duplicateIconWhite,color:"#FFFFFF"}:{icon:this.icons.duplicateIconBlue,color:"#276899"}}},methods:{setReadonly(e){this.readonly=e},copyScenario(){this.$store.dispatch("copyScenario",this.getScenario)},reorderHandler(e){e.apply(this.getListScenarios),e.apply(this.getInitialList),this.$store.dispatch("setSortedArrayOfUids")},changeActiveScenario(e,t){this.showApplyBtn&&t.uid!==this.getScenario.uid?(this.$emit("changeConfirmationConfig",{textConfirmation:"You have unsaved changes. Are you sure you want to switch?",executeBtnText:"Confrim",execute:()=>{e(),this.confirmationConfig.cancel()}}),this.$nextTick((()=>this.$store.commit("confirmationMutation",this.confirmationConfig))),this.$emit("setConfirmationValue",t)):e()},setScenario(e){if(this.activeTab===e.path&&!this.changeMode)return this.activeTab="",this.$store.dispatch("selectCurrentScenario",null),!1;this.$emit("setDeleteScenarios",[]),this.$emit("setShowApplyBtn",!1),this.$store.commit("listScenariosMutation",this.getInitialList),this.$store.dispatch("selectCurrentScenario",e)},changeName(e){this.changeMode&&(this.readonly=e)},setName(e,t){let i=JSON.parse(JSON.stringify(e));!i.length&&(i=t.path.split("/")[t.path.split("/").length-1]),this.$store.dispatch("setChangeNameScenario",i)},deleteScenario(e,t){"child"===t?this.childScenarioToDeleteArray(e):"parent"===t&&this.parentScenarioToDeleteArray(e)},childScenarioToDeleteArray(e){const t=JSON.parse(JSON.stringify(this.deleteScenarios));t.push(e.uid),this.$emit("setDeleteScenarios",t)},parentScenarioToDeleteArray(e){const t=(0,H.Dz)(this.getListScenarios,e);if(t.length>1)this.$emit("setConfirmationValue",{list:t,item:e}),this.$nextTick((()=>this.$store.commit("confirmationMutation",this.confirmationToDeleteConfig)));else if(1===t.length){const e=JSON.parse(JSON.stringify(this.deleteScenarios));e.push(t[0].uid),this.$emit("setDeleteScenarios",e)}},setNewScenario(e){let t=!1;e.split("/").length>1?this.getInitialList.forEach((i=>{i.path===`/${e.split("/")[0]}`&&(t=!0)})):t=!0,t||(this.$emit("changeConfirmationConfig",{textConfirmation:"To create a child script first save the parent.",executeBtnText:null}),this.$nextTick((()=>this.$store.commit("confirmationMutation",this.confirmationConfig))),this.$emit("setConfirmationValue",null)),t&&(this.changeMode=!1,this.$store.dispatch("setNewScenario",e),this.name.mainName="",this.name.secondaryName="",this.activeTab=`/${e}`,this.$emit("setShowApplyBtn",!1))}},mounted(){this.activeTab=this.getScenario?.path||""}},Xt=Yt,jt=(0,T.Z)(Xt,Rt,Mt,!1,null,"0b868ef6",null),ei=jt.exports,ti={name:"ParentScenario",components:{ControlPanel:Me.Z,Item:O,queueConfiguration:Pe,dialConfiguration:Fe,vNumberConfiguration:He,IVRConfiguration:rt,WaitConfiguration:ht,AnnouncementConfiguration:St,HangupConfiguration:Nt,NewItemConfiguration:$t,ScenariosMenu:ei},data(){return{confirmationValue:null,counter:0,showApplyBtn:!1,wrapperWidth:"100%",fullScreen:!1,deleteScenarios:[],confirmationConfig:{execute:()=>this.executeConfirnation(this.confirmationValue),executeBtnText:"Confirm",cancel:()=>this.closeModalConfirmation(),cancelBtnText:"Close",titleText:"Confirmation",textConfirmation:""},confirmationToDeleteConfig:{execute:()=>this.moveChildrenRelatedScenarios(this.confirmationValue),executeBtnText:"Move elements",cancel:()=>this.relatedScenariosToDeleteArray(this.confirmationValue),cancelBtnText:"Delete all",titleText:"Confirmation",textConfirmation:"This scenario contains inner elements Are you sure you want to delete this scenario? You can delete it all or move inner elements on board."},invalidModal:{execute:()=>this.$store.commit("confirmationMutation",null),cancel:()=>this.closeModalConfirmation(),cancelBtnText:"Close",titleText:"Error",textConfirmation:""},icons:{expandToFullScreenIcon:Ot,expandToFullScreenIconLight:_t,collapseFullScreenIcon:Ft,collapseFullScreenIconLight:Vt}}},watch:{getIsFullNavMenu(){setTimeout((()=>{this.calcWrapperWidth()}),100)},getListScenarios:{handler(){const e=[];this.getInitialList.forEach((t=>{const i=this.getListScenarios.find((e=>e.uid===t.uid));JSON.stringify(t)!==JSON.stringify(i)&&this.getScenario?.uid!==i?.uid&&e.push(i)})),this.$store.commit("arrayOfScenariosWithChangedNameMutation",e)},deep:!0}},computed:{...(0,x.Se)(["getListScenarios","getShowConfig","getScenario","getInitialList","getInitialScenario","getIsFullNavMenu","theme","getItemScenario","getArrayUidsOfDeleteScenarios","getArrayOfScenariosWithChangedName"])},methods:{setDeleteScenarios(e){this.$store.commit("arrayUidsOfDeleteScenariosMutation",e)},setConfirmationValue(e){this.confirmationValue=e},setShowApplyBtn(e){this.showApplyBtn=e},changeConfirmationConfig(e){this.confirmationConfig={...this.confirmationConfig,...e}},moveChildrenRelatedScenarios(e){const t=JSON.parse(JSON.stringify(this.getArrayUidsOfDeleteScenarios));return t.push(e.item.uid),this.setDeleteScenarios(t),e.list.filter((t=>t.uid!==e.item.uid)).forEach((e=>{const t="/"+e.path.split("/")[2];this.$store.dispatch("changeNameOfScenario",{newName:t,scenario:e})})),this.closeModalConfirmation()},relatedScenariosToDeleteArray(e){const t=JSON.parse(JSON.stringify(this.getArrayUidsOfDeleteScenarios));return t.push(...e.list.map((e=>e.uid))),this.setDeleteScenarios(t),this.closeModalConfirmation()},toggleFullScreen(e){e?this.$store.commit("isFullNavMenuMutation",!1):this.$store.commit("isFullNavMenuMutation",!0),this.fullScreen=e,setTimeout((()=>{this.calcWrapperWidth()}),100)},calcWrapperWidth(){return this.fullScreen?this.wrapperWidth=`calc(100vw - ${this.$el?.getBoundingClientRect().left+5}px)`:this.wrapperWidth="100%"},isValidScenario(){const e=(0,H.p_)(JSON.parse(JSON.stringify(this.getScenario)));return e&&(this.invalidModal.textConfirmation=e,this.$store.commit("confirmationMutation",this.invalidModal)),e},applyChanges(){this.getArrayUidsOfDeleteScenarios.length&&this.$store.dispatch("deleteScenarios",this.getArrayUidsOfDeleteScenarios),"new"!==this.getScenario?.uid.split(" ")[0]||this.isValidScenario()||this.$store.dispatch("createScenario",(0,H.xy)((0,H.iU)(JSON.parse(JSON.stringify(this.getScenario))))),this.getArrayOfScenariosWithChangedName.length?this.$store.dispatch("updateScenarioWithChangedName",this.getArrayOfScenariosWithChangedName):this.getScenario?.uid&&!this.isValidScenario()&&this.$store.dispatch("updateScenario",(0,H.xy)((0,H.iU)(JSON.parse(JSON.stringify(this.getScenario))))),this.showApplyBtn=!1},executeConfirnation(e){this.setScenario(e),this.closeModalConfirmation()},closeModalConfirmation(){this.confirmationConfig.textConfirmation="",this.confirmationValue=null,this.confirmationConfig.executeBtnText=null,this.$store.commit("confirmationMutation",null)},setScenario(e){this.$refs.scenariosMenu.setScenario(e)},async clearChanges(){await this.$store.dispatch("setListScenarios"),this.setDeleteScenarios([]),this.showApplyBtn=!1,this.$store.dispatch("setShowConfig",null),this.$store.dispatch("setScenario",this.getInitialList.filter((e=>e.uid===this.getScenario?.uid))[0]),this.$store.dispatch("setInitialScenario",this.getInitialList.filter((e=>e.uid===this.getInitialScenario?.uid))[0])},isEqual(){const e=ae().omit((0,H.Rd)((0,H.xy)((0,H.uu)(JSON.parse(JSON.stringify(this.getScenario))))),"externalNumbers"),t=ae().omit((0,H.Rd)((0,H.xy)((0,H.uu)(JSON.parse(JSON.stringify(this.getInitialScenario))))),"externalNumbers");this.showApplyBtn=!ae().isEqual(e,t)||this.getArrayUidsOfDeleteScenarios.length}},mounted(){this.$store.dispatch("setListScenarios"),this.$store.dispatch("globalUsersListRequest",{peerPage:9}),this.$store.subscribe((e=>{Ke.Z.scenarios.includes(e.type)&&this.isEqual()}))}},ii=ti,si=(0,T.Z)(ii,s,n,!1,null,"69cf102f",null),ni=si.exports},83850:function(e,t,i){i(57658);var s=i(51579),n=i.n(s);t["Z"]={changeCountry(e,t,i,s){let a=t,r=i,o=[];if(e){const t=a.filter((t=>t[s]===e[s]));t.length?(a=a.filter((t=>t[s]!==e[s])),r.push(e)):(r=r.filter((t=>t[s]!==e[s])),a.push(e)),a=n().sortBy(a,[s]),r=n().sortBy(r,[s]),o=n().concat(a,r)}else r=o=n().concat(JSON.parse(JSON.stringify(a)),JSON.parse(JSON.stringify(r))),a=[];return{topList:a,bottomList:r,getCountries:o}}}},35211:function(e,t){t["Z"]={user:["pushField","addSelectedQueues","setDeps","setNewRole","setVNumber","userDepsManaged","userQueuesManaged","setPermissionCDRMutation","viewBillingReportsMutatution","editQueueMutation"],departments:["pushNameDepartment","pushAgentsDepartment","pushManagersDepartment","pushNumbersDepartment"],queues:["strategyMutation","timeoutMutation","ringinuseMutation","waitMutation","queueNameInfoMutation","strategyInfoMutaion","timeoutInfoMutation","ringInUseInfoMutation","maxWaitInfoMutation","agentsQueueInfoMutation","managersQueueInfoMutation","updateQueuesInListMutation"],numbers:["setNumbers","deleteNumber"],paginator:{CDR:["pageCDRMutation","peerPageCDRMutation"],departments:["setDepPage","setDepPerPage"],users:["setUserPage","setUserPerPage"],queues:["setQueuePage","setQueuePerPage"],numbers:["setNumPage","setNumPerPage"],depForNums:["setDepPage","setDepPerPage"],payments:["setPaymentsPage","setPaymentsPerPage"],charges:["setChargesPage","setChargesPerPage"],leftRoutes:["setLeftRoutesPage","setLeftRoutesPerPage"],rightRoutes:["setRightRoutesPage","setRightRoutesPerPage"]},scenarios:["itemScenariosMutation","deleteItemMutation","changeNameScenarioMutation","newScenarioMutation","isSwappedModeMutation","listScenariosMutationWithObservers","arrayUidsOfDeleteScenariosMutation","listScenariosMutationAfterChangeName","arrayOfScenariosWithChangedNameMutation"]}}}]);
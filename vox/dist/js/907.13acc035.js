"use strict";(self["webpackChunkVoxonics"]=self["webpackChunkVoxonics"]||[]).push([[907],{11107:function(t,e,s){s.d(e,{Z:function(){return c}});var a=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"btn-container"},[e("button",{staticClass:"apply-btn",on:{click:function(e){return t.apply()}}},[t._v(t._s(t.text||"Apply Changes"))]),e("div",{staticClass:"clean-btn",on:{click:function(e){return t.discard()}}},[e("img",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",arrow:!0,delay:800,duration:500},expression:"{ placement : 'top',  arrow: true, delay : 800, duration: 500 }"}],attrs:{width:"24",height:"25",content:"Discard",src:s(62091),alt:"broom"}})])])},i=[],n={name:"ControlPanel",props:["show","apply","discard","text"],mounted(){document.addEventListener("keydown",(t=>{"s"===t.key&&(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)&&this.show&&(t.preventDefault(),this.apply()),(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)&&"z"===t.key&&this.discard()}),!1)}},r=n,o=s(1001),l=(0,o.Z)(r,a,i,!1,null,"0c4a9bee",null),c=l.exports},12246:function(t,e,s){s.d(e,{Z:function(){return c}});var a=function(){var t=this,e=t._self._c;return t.deleteInfo?e("div",{staticClass:"personal-info-wrap",style:{top:`${t.topProp}px`,height:`calc(100% - ${t.topProp}px)`}},[e("div",{staticClass:"delete-block"},[e("span",[e("div",{staticClass:"delete-top-block"},[t._m(0),e("div",{staticClass:"top-content-block"},[e("span",{staticClass:"top-title"},[t._v(t._s(t.titleProp))]),e("span",{staticClass:"top-content"},[t._v(t._s(t.textProp))])])]),e("div",{staticClass:"delete-btn-block"},[e("span",{staticClass:"cancel-btn",on:{click:function(e){return t.cancelDeleteItem()}}},[t._v("Cancel")]),e("span",{staticClass:"delete-btn",on:{click:function(e){return t.deleteItem()}}},[t._v("Delete ")])])])])]):t._e()},i=[function(){var t=this,e=t._self._c;return e("span",{staticClass:"delete-image"},[e("img",{attrs:{src:s(21920),alt:"delete"}})])}],n={name:"DeleteQueue",props:["deleteFunc","cancelDeleteFunc","deleteInfo","textProp","titleProp","topProp"],methods:{cancelDeleteItem(){this.$emit("cancelDeleteFunc")},deleteItem(){this.$emit("deleteFunc")}},mounted(){document.addEventListener("keydown",(t=>{"Enter"===t.key&&this.deleteInfo&&this.deleteItem(),"Escape"===t.key&&this.deleteInfo&&this.cancelDeleteItem()}))}},r=n,o=s(1001),l=(0,o.Z)(r,a,i,!1,null,"55a9bb86",null),c=l.exports},56907:function(t,e,s){s.r(e),s.d(e,{default:function(){return q}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrap-main-department"},[e("div",{staticClass:"wrap-form"},[e("form",{on:{submit:function(t){t.preventDefault()}}},[e("DepartmentInfo"),e("div",{staticClass:"tabs"},[e("div",{staticClass:"left-tabs"},[e("div",{staticClass:"tab",class:{active:"agents"===t.showOptions},on:{click:function(e){return t.setShowOptions("agents")}}},[t._v(" Agents in Department ")]),e("div",{staticClass:"tab",class:{active:"managers"===t.showOptions},on:{click:function(e){return t.setShowOptions("managers")}}},[t._v(" Managed by ")]),e("div",{staticClass:"tab",class:{active:"numbers"===t.showOptions},on:{click:function(e){return t.setShowOptions("numbers")}}},[t._v(" V-Numbers in Department ")])]),e("div",{staticClass:"right-tabs"},[e("ControlPanel",{attrs:{show:t.showApplyBtn,apply:t.handlerSubmit,discard:t.clearDepartment}})],1)]),"agents"===t.showOptions?[e("AgentSetting"),e("DeleteComponent",{attrs:{deleteInfo:t.getDeleteDep,textProp:t.textToDeleteComponent,titleProp:t.titleToDeleteComponent,topProp:227},on:{deleteFunc:t.deleteDepartment,cancelDeleteFunc:t.cancelDelete}})]:t._e(),"managers"===t.showOptions?[e("ManagerSettings"),e("DeleteComponent",{attrs:{deleteInfo:t.getDeleteDep,textProp:t.textToDeleteComponent,titleProp:t.titleToDeleteComponent,topProp:227},on:{deleteFunc:t.deleteDepartment,cancelDeleteFunc:t.cancelDelete}})]:t._e(),"numbers"===t.showOptions?[e("VNumbersSetting"),e("DeleteComponent",{attrs:{deleteInfo:t.getDeleteDep,textProp:t.textToDeleteComponent,titleProp:t.titleToDeleteComponent,topProp:227},on:{deleteFunc:t.deleteDepartment,cancelDeleteFunc:t.cancelDelete}})]:t._e()],2)])])},i=[],n=s(90408),r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"personal-info-wrap",class:{"disabled-events":!t.$access.isEditDepAndQueue(t.userInfo,"department",t.departmentInfo)}},[e("div",{staticClass:"wrap-head"},[e("h2",[t._v("DEPARTMENT INFO")]),e("span",{staticClass:"hr"}),e("span",[e("svg",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",arrow:!0,delay:800,duration:500},expression:"{ placement : 'top',  arrow: true, delay : 800, duration: 500 }"}],staticClass:"trash",class:{grayscale:!t.$access.isEditDepAndQueue(t.userInfo,"department",t.departmentInfo)},attrs:{width:"30",height:"39",viewBox:"0 0 30 39",fill:"none",xmlns:"http://www.w3.org/2000/svg",content:"Delete department"},on:{click:function(e){return t.del()}}},[e("path",{attrs:{d:"M2.14286 34.6667C2.14286 37.05 4.07143 39 6.42857 39H23.5714C25.9286 39 27.8571 37.05 27.8571 34.6667V8.66667H2.14286V34.6667ZM30 2.16667H22.5L20.3571 0H9.64286L7.5 2.16667H0V6.5H30V2.16667Z",fill:"#276899"}}),e("rect",{attrs:{x:"10",y:"1",width:"10",height:"1"}}),e("rect",{attrs:{x:"6",y:"12",width:"2",height:"23"}}),e("rect",{attrs:{x:"14",y:"12",width:"2",height:"23"}}),e("rect",{attrs:{x:"22",y:"12",width:"2",height:"23"}})])])]),e("div",{staticClass:"wrap-body"},[e("div",{staticClass:"personal-info"},[e("div",{staticClass:"personal-info__first-part"},[e("span",[t._v(" Name of Department:")]),e("div",{staticClass:"item-container with-err"},[e("div",{staticClass:"left-section-block"},[e("input",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",arrow:!0,delay:800,duration:500},expression:"{ placement : 'top',  arrow: true, delay : 800, duration: 500 }"},{name:"model",rawName:"v-model.trim",value:t.name,expression:"name",modifiers:{trim:!0}}],class:{"input-field":t.edit,grayscale:!t.$access.isEditDepAndQueue(t.userInfo,"department",t.departmentInfo)},style:{width:t.computedWidth},attrs:{content:"Change name",placeholder:"Enter name of Department",defaulValue:t.departmentInfoName,maxlength:"12"},domProps:{value:t.name},on:{input:[function(e){e.target.composing||(t.name=e.target.value.trim())},t.setDepartmentName],blur:function(e){return t.$forceUpdate()}}}),e("span",{staticClass:"last-update-block"},[e("span",{staticClass:"last-update-text"},[t._v("Last updated:")]),e("span",{staticClass:"last-update-data"},[t._v(t._s(t.departmentInfo.dateUpdated))])])]),e("div",{staticClass:"wrap-static"},[e("div",{staticClass:"static"},[e("div",{staticClass:"label"},[t._v("Numbers in Department:")]),e("div",{staticClass:"num"},[t._v(t._s(t.numbersDep.length||0))])]),e("div",{staticClass:"static"},[e("div",{staticClass:"label"},[t._v("Agents in Department:")]),e("div",{staticClass:"num"},[t._v(t._s(t.agentsDep.length||0))])]),e("div",{staticClass:"static"},[e("div",{staticClass:"label"},[t._v("Managers in Department:")]),e("div",{staticClass:"num"},[t._v(t._s(t.managersDep.length||0))])])])])])])])])},o=[],l=s(96458),c={name:"DepartmentInfo",data(){return{name:"",edit:!1}},computed:{...(0,n.Se)(["numbersDep","agentsDep","managersDep","departmentInfoName","userInfo","departmentInfo"]),computedWidth(){return this.name.length?32+1.1*this.name.length*24+"px":"100%"}},methods:{del(){this.$store.dispatch("setDeleteDep",!0)},setDepartmentName(){this.$store.dispatch("changeNameDepartment",this.name)}},mounted(){this.name=this.departmentInfoName,l.Z.subscribe((t=>{"pushDepartment"===t.type&&(this.name=this.departmentInfoName)}))}},u=c,p=s(1001),m=(0,p.Z)(u,r,o,!1,null,"c1c37abe",null),d=m.exports,h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"personal-info-wrap",class:{"disabled-events":!t.$access.isEditDepAndQueue(t.userInfo,"department",t.departmentInfo)}},[t._m(0),e("div",{staticClass:"top"},[e("div",{staticClass:"left",class:{"disabled-gray-options-block":!t.$access.isEditDepAndQueue(t.userInfo,"department",t.departmentInfo)}},[t._v(" Add agent ")]),e("div",{staticClass:"agents users"},[t.agentsDep.length?e("div",{staticClass:"agent user"},[t._m(1),e("span",{staticClass:"name"},[t._v("Agent Number")]),e("span",{staticClass:"union"})]):t._e(),t.agentsDep.length>1?e("div",{staticClass:"agent user"},[t._m(2),e("span",{staticClass:"name"},[t._v("Agent Number")]),e("span",{staticClass:"union"})]):t._e(),t.agentsDep.length>2?e("div",{staticClass:"agent user"},[t._m(3),e("span",{staticClass:"name"},[t._v("Agent Number")]),e("span",{staticClass:"union"})]):t._e(),t.agentsDep.length>3?e("div",{staticClass:"agent user"},[t._m(4),e("span",{staticClass:"name"},[t._v("Agent Number")]),e("span",{staticClass:"union"})]):t._e()])]),e("div",{staticClass:"wrap-body",class:{"disabled-gray-options-block":!t.$access.isEditDepAndQueue(t.userInfo,"department",t.departmentInfo)}},[e("div",{staticClass:"personal-info"},[e("div",{staticClass:"personal-info__first-part"},[e("div",{staticClass:"item-container with-err"},[e("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hideListUsers,expression:"hideListUsers"}],staticClass:"label"},[e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.name,expression:"name",modifiers:{trim:!0}}],staticClass:"input-field",attrs:{placeholder:"Enter name or Agent Number"},domProps:{value:t.name},on:{click:function(e){return t.showList()},input:[function(e){e.target.composing||(t.name=e.target.value.trim())},function(e){t.showAgents=!0,t.searchDepartments()}],blur:function(e){return t.$forceUpdate()}}}),e("span",{staticClass:"triangle",class:{"rotate-arrow":t.showAgents},on:{click:function(e){return t.showList()}}},[e("img",{attrs:{src:s(97646),alt:"select"}})]),e("DropdownList",{directives:[{name:"show",rawName:"v-show",value:t.showAgents,expression:"showAgents"}],attrs:{classNameList:"list",dataList:t.mainList.getMainList,itemText:t=>`<span>${t.name}</span><span>ID ${t.internalNumber}</span>`,classNameItemComputed:e=>t.agentsDep.filter((t=>t.uid===e.uid)).length?t.collapse?"selected collapsed row":"selected row":"row",showItem:e=>!t.agentsDep.filter((t=>t.uid===e.uid)).length||!t.collapse},on:{scrollFunc:e=>t.funScroll(e),clickFunc:e=>t.chooseAgent(e)}},[e("span",{staticClass:"collapse",on:{click:function(e){t.collapse=!t.collapse}}},[e("img",{staticClass:"button",attrs:{src:t.collapse?t.extendImg:t.collapseImg,alt:"collapse"}}),e("span",{staticClass:"text"},[t._v("Selected users available to you:")]),e("span",{staticClass:"amount"},[t._v(t._s(t.mainList.topList.length))])])])],1)])])]),e("div",{staticClass:"agents users"},t._l(t.agentsDep,(function(a,i){return e("div",{key:i,staticClass:"agent user"},[e("div",{staticClass:"block"},[e("div",{staticClass:"round"},[e("img",{attrs:{src:a.avatar||t.userAva,alt:"avatar"}})]),e("span",{staticClass:"name"},[t._v(t._s(a.name))])]),e("span",{staticClass:"name"},[t._v(t._s(a.internalNumber))]),e("img",{staticClass:"union",attrs:{src:s(93996),width:"19",alt:""},on:{click:function(e){return t.chooseAgent(a)}}})])})),0)])])},g=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrap-head"},[e("h2",[t._v("Agents in Department")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"block"},[e("div",{staticClass:"round"},[t._v("Name")]),e("span",{staticClass:"name"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"block"},[e("div",{staticClass:"round"},[t._v("Name")]),e("span",{staticClass:"name"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"block"},[e("div",{staticClass:"round"},[t._v("Name")]),e("span",{staticClass:"name"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"block"},[e("div",{staticClass:"round"},[t._v("Name")]),e("span",{staticClass:"name"})])}],v=s(94227),f=s(34675),b=s(76692),C=s(39132),D=s(68956),_=s.n(D),w=s(60949),L=s(51579),N=s.n(L),y={name:"AgentSetting",components:{DropdownList:C.Z},data(){return{unsubscribeStore:()=>{},collapseImg:f,extendImg:b,collapse:!1,name:"",showAgents:!1,userAva:v,perPage:9,mainList:{topList:[],bottomList:[],getMainList:[]}}},watch:{getGlobalUsersList(){(0,w.e)(this,this.getGlobalUsersList,"agentsDep"),this.mainList.getMainList=N().concat(this.mainList.topList,this.mainList.bottomList)}},computed:{...(0,n.Se)(["agentsDep","userInfo","departmentInfo","getGlobalUsersList","getPaginatorUsers"])},methods:{searchDepartments(){clearTimeout(this.timer),this.timer=setTimeout((()=>this.fetch()),800)},funScroll({target:t}){t.clientHeight+t.scrollTop===t.scrollHeight&&this.getPaginatorUsers.paginator.count>this.perPage&&(this.perPage+=9,this.fetch())},fetch(){this.$store.dispatch("globalUsersListRequest",{peerPage:this.perPage,sort:"",page:1,search:this.name,role:"",order:"asc"})},hideListUsers(){this.showAgents=!1},showList(){this.showAgents||this.mainList.getMainList.length||this.fetch(),this.showAgents=!this.showAgents},chooseAgent(t){const e=N().omit(t,"dateCreated","dateUpdated","manage","relatedWith","status","statusTime","permission");(0,w.Z)(this,e,"agentsDep","setAgentsDepartment")},setAgentsDepartment(t){this.$store.dispatch("changeAgentsDepartment",t)}},mounted(){this.popupItem=this.$el.children[2].children[0],this.unsubscribeStore=l.Z.subscribe((t=>{"pushDepartment"===t.type&&(this.mainList.topList=JSON.parse(JSON.stringify(this.agentsDep)))})),this.mainList.topList=JSON.parse(JSON.stringify(this.agentsDep))},beforeDestroy(){this.unsubscribeStore()},directives:{ClickOutside:_()}},I=y,P=(0,p.Z)(I,h,g,!1,null,"9bff4af6",null),k=P.exports,S=function(){var t=this,e=t._self._c;return e("div",{staticClass:"personal-info-wrap",class:{"disabled-events":!t.$access.isEditDepAndQueue(t.userInfo,"department",t.departmentInfo)}},[t._m(0),e("div",{staticClass:"top"},[e("div",{staticClass:"left",class:{"disabled-gray-options-block":!t.$access.isEditDepAndQueue(t.userInfo,"department",t.departmentInfo)}},[t._v("Add manager ")]),e("div",{staticClass:"managers users"},[t.managersDep.length?e("div",{staticClass:"manager user"},[t._m(1),e("span",{staticClass:"name"},[t._v("Agent Number")]),e("span",{staticClass:"union"})]):t._e(),t.managersDep.length>1?e("div",{staticClass:"manager user"},[t._m(2),e("span",{staticClass:"name"},[t._v("Agent Number")]),e("span",{staticClass:"union"})]):t._e(),t.managersDep.length>2?e("div",{staticClass:"manager user"},[t._m(3),e("span",{staticClass:"name"},[t._v("Agent Number")]),e("span",{staticClass:"union"})]):t._e()])]),e("div",{staticClass:"wrap-body",class:{"disabled-gray-options-block":!t.$access.isEditDepAndQueue(t.userInfo,"department",t.departmentInfo)}},[e("div",{staticClass:"personal-info"},[e("div",{staticClass:"personal-info__first-part"},[e("div",{staticClass:"item-container with-err"},[e("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hideListUsers,expression:"hideListUsers"}],staticClass:"label"},[e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.name,expression:"name",modifiers:{trim:!0}}],staticClass:"input-field",attrs:{placeholder:"Enter name or Agent Number"},domProps:{value:t.name},on:{click:function(e){return t.showList()},input:[function(e){e.target.composing||(t.name=e.target.value.trim())},function(e){t.showManagers=!0,t.searchDepartments()}],blur:function(e){return t.$forceUpdate()}}}),e("span",{staticClass:"triangle",class:{"rotate-arrow":t.showManagers},on:{click:function(e){return t.showList()}}},[e("img",{attrs:{src:s(97646),alt:"select"}})]),e("DropdownList",{directives:[{name:"show",rawName:"v-show",value:t.showManagers,expression:"showManagers"}],attrs:{classNameList:"list",dataList:t.mainList.getMainList,itemText:t=>`<span>${t.name}</span><span>ID ${t.internalNumber}</span>`,classNameItemComputed:e=>t.managersDep.filter((t=>t.uid===e.uid)).length?t.collapse?"selected collapsed row":"selected row":"row",showItem:e=>!t.managersDep.filter((t=>t.uid===e.uid)).length||!t.collapse},on:{scrollFunc:e=>t.funScroll(e),clickFunc:e=>t.chooseAgent(e)}},[e("span",{staticClass:"collapse",on:{click:function(e){t.collapse=!t.collapse}}},[e("img",{staticClass:"button",attrs:{src:t.collapse?t.extendImg:t.collapseImg,alt:"collapse"}}),e("span",{staticClass:"text"},[t._v("Selected users available to you:")]),e("span",{staticClass:"amount"},[t._v(t._s(t.mainList.topList.length))])])])],1)])])]),e("div",{staticClass:"managers users"},t._l(t.managersDep,(function(a,i){return e("div",{key:i,staticClass:"manager user"},[e("div",{staticClass:"block"},[e("div",{staticClass:"round"},[e("img",{attrs:{src:a.avatar||t.userAva,alt:"avatar"}})]),e("span",{staticClass:"name"},[t._v(t._s(a.name))])]),e("span",{staticClass:"name"},[t._v(t._s(a.internalNumber))]),e("div",{staticClass:"action"},[e("label",{staticClass:"label-container",class:{"disabled-checkbox":"root"===a.role||"owner"===a.role||"admin"===a.role}},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.option.edit,expression:"manager.option.edit"}],staticClass:"edit",attrs:{disabled:"root"===a.role||"owner"===a.role||"admin"===a.role||!t.$access.isEditDepAndQueue(t.userInfo,"department",t.departmentInfo),type:"checkbox"},domProps:{checked:Array.isArray(a.option.edit)?t._i(a.option.edit,null)>-1:a.option.edit},on:{change:[function(e){var s=a.option.edit,i=e.target,n=!!i.checked;if(Array.isArray(s)){var r=null,o=t._i(s,r);i.checked?o<0&&t.$set(a.option,"edit",s.concat([r])):o>-1&&t.$set(a.option,"edit",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(a.option,"edit",n)},function(e){return t.changeEdit(a)}]}}),e("span",{staticClass:"check"}),e("span",{staticClass:"text"},[t._v("Edit")])])]),e("img",{staticClass:"union",attrs:{src:s(93996),width:"19",alt:""},on:{click:function(e){return t.chooseAgent(a)}}})])})),0)])])},x=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrap-head"},[e("h2",[t._v("Managed by")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"block"},[e("div",{staticClass:"round"},[t._v("Name")]),e("span",{staticClass:"name"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"block"},[e("div",{staticClass:"round"},[t._v("Name")]),e("span",{staticClass:"name"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"block"},[e("div",{staticClass:"round"},[t._v("Name")]),e("span",{staticClass:"name"})])}],A={name:"ManagerSetting",components:{DropdownList:C.Z},data(){return{unsubscribeStore:()=>{},collapseImg:f,extendImg:b,collapse:!1,name:"",showManagers:!1,userAva:v,perPage:9,mainList:{topList:[],bottomList:[],getMainList:[]}}},watch:{getGlobalUsersList(){(0,w.e)(this,this.getGlobalUsersList,"managersDep"),this.mainList.getMainList=N().concat(this.mainList.topList,this.mainList.bottomList)}},computed:{...(0,n.Se)(["managersDep","userInfo","departmentInfo","getGlobalUsersList","getPaginatorUsers"])},methods:{searchDepartments(){clearTimeout(this.timer),this.timer=setTimeout((()=>this.fetch()),800)},funScroll({target:t}){t.clientHeight+t.scrollTop===t.scrollHeight&&this.getPaginatorUsers.paginator.count>this.perPage&&(this.perPage+=9,this.fetch())},fetch(){this.$store.dispatch("globalUsersListRequest",{peerPage:this.perPage,sort:"",page:1,search:this.name,role:"manager",order:"asc"})},hideListUsers(){this.showManagers=!1},showList(){this.showManagers||this.mainList.getMainList.length||this.fetch(),this.showManagers=!this.showManagers},chooseAgent(t){const e=N().omit(t,"dateCreated","dateUpdated","manage","relatedWith","status","statusTime","permission");(0,w.Z)(this,JSON.parse(JSON.stringify({...e,option:{edit:!1}})),"managersDep","setAgentsDepartment")},changeEdit(){this.setAgentsDepartment()},setAgentsDepartment(t=this.managersDep){this.$store.dispatch("changeManagersDepartment",t)}},mounted(){this.popupItem=this.$el.children[2].children[0],this.unsubscribeStore=l.Z.subscribe((t=>{"pushDepartment"===t.type&&(this.mainList.topList=JSON.parse(JSON.stringify(this.managersDep)))})),this.mainList.topList=JSON.parse(JSON.stringify(this.managersDep))},beforeDestroy(){this.unsubscribeStore()},directives:{ClickOutside:_()}},M=A,$=(0,p.Z)(M,S,x,!1,null,"db5ac9ce",null),O=$.exports,E=function(){var t=this,e=t._self._c;return e("div",{staticClass:"personal-info-wrap",class:{"disabled-events":!t.$access.isEditDepAndQueue(t.userInfo,"department",t.departmentInfo)}},[t._m(0),e("div",{staticClass:"top"},[e("div",{staticClass:"left",class:{"disabled-gray-options-block":!t.$access.isEditDepAndQueue(t.userInfo,"department",t.departmentInfo)}},[t._v("Assign number ")]),e("div",{staticClass:"numbers"},[t.numbersDep.length?e("div",{staticClass:"number"},[t._m(1),e("span",{staticClass:"name"}),e("span",{staticClass:"union"})]):t._e(),t.numbersDep.length>1?e("div",{staticClass:"number"},[t._m(2),e("span",{staticClass:"name"}),e("span",{staticClass:"union"})]):t._e(),t.numbersDep.length>2?e("div",{staticClass:"number"},[t._m(3),e("span",{staticClass:"name"}),e("span",{staticClass:"union"})]):t._e(),t.numbersDep.length>3?e("div",{staticClass:"number"},[t._m(4),e("span",{staticClass:"name"}),e("span",{staticClass:"union"})]):t._e()])]),e("div",{staticClass:"wrap-body",class:{"disabled-gray-options-block":!t.$access.isEditDepAndQueue(t.userInfo,"department",t.departmentInfo)}},[e("div",{staticClass:"personal-info"},[e("div",{staticClass:"personal-info__first-part"},[e("div",{staticClass:"item-container with-err"},[e("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hideListNumbers,expression:"hideListNumbers"}],staticClass:"label"},[e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.name,expression:"name",modifiers:{trim:!0}}],staticClass:"input-field",attrs:{placeholder:"Enter or select number"},domProps:{value:t.name},on:{click:function(e){return t.showList()},input:[function(e){e.target.composing||(t.name=e.target.value.trim())},function(e){t.showNumbers=!0,t.searchNumbers()}],blur:function(e){return t.$forceUpdate()}}}),e("span",{staticClass:"triangle",class:{"rotate-arrow":t.showNumbers},on:{click:function(e){return t.showList()}}},[e("img",{attrs:{src:s(97646),alt:"select"}})]),e("DropdownList",{directives:[{name:"show",rawName:"v-show",value:t.showNumbers,expression:"showNumbers"}],attrs:{classNameList:"list",dataList:t.mainList.getMainList,itemText:t=>`<span>${t.description} ${t.number}</span>`,classNameItemComputed:e=>t.numbersDep.filter((t=>t.uid===e.uid)).length?"selected row":"row"},on:{scrollFunc:e=>t.funScroll(e),clickFunc:e=>t.chooseNumber(e)}})],1)])])]),e("div",{staticClass:"numbers"},t._l(t.numbersDep,(function(a,i){return e("div",{key:i,staticClass:"number"},[e("div",{staticClass:"block"},[e("div",{staticClass:"round"},[t._v(t._s(i+1)+".")]),e("span",{staticClass:"name"},[t._v(t._s(a.number))]),e("span",{staticClass:"description"},[t._v(t._s(a.description))])]),e("span",{staticClass:"name"},[t._v(t._s(a.internalNumber))]),e("img",{staticClass:"union",attrs:{src:s(93996),width:"19",alt:""},on:{click:function(e){return t.chooseNumber(a)}}})])})),0)])])},U=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrap-head"},[e("h2",[t._v("Numbers in Department")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"block"},[e("div",{staticClass:"round"},[t._v("№ "),e("span",{staticClass:"vnumber"},[t._v("VNumber")])]),e("span",{staticClass:"name"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"block"},[e("div",{staticClass:"round"},[t._v("№ "),e("span",{staticClass:"vnumber"},[t._v("VNumber")])]),e("span",{staticClass:"name"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"block"},[e("div",{staticClass:"round"},[t._v("№ "),e("span",{staticClass:"vnumber"},[t._v("VNumber")])]),e("span",{staticClass:"name"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"block"},[e("div",{staticClass:"round"},[t._v("№ "),e("span",{staticClass:"vnumber"},[t._v("VNumber")])]),e("span",{staticClass:"name"})])}],Z={name:"VNumbersSetting",components:{DropdownList:C.Z},data(){return{unsubscribeStore:()=>{},name:"",showNumbers:!1,perPage:12,mainList:{topList:[],bottomList:[],getMainList:[]}}},watch:{getGlobalExternalNumbers(){(0,w.e)(this,this.getGlobalExternalNumbers,"numbersDep"),this.mainList.getMainList=N().concat(this.mainList.topList,this.mainList.bottomList)}},computed:{...(0,n.Se)(["numbersDep","userInfo","departmentInfo","getGlobalExternalNumbers","getPaginatorNumbers"])},methods:{searchNumbers(){clearTimeout(this.timer),this.timer=setTimeout((()=>this.fetch()),800)},funScroll({target:t}){t.clientHeight+t.scrollTop===t.scrollHeight&&this.getPaginatorNumbers.paginator.count>this.perPage&&(this.perPage+=9,this.fetch())},fetch(){this.$store.dispatch("setGlobalExternalNumbers",{peerPage:this.perPage,number:this.name})},showList(){this.fetch(),this.showNumbers=!this.showNumbers},hideListNumbers(){this.showNumbers=!1},chooseNumber(t){const e=N().omit(t,"usedIn");(0,w.Z)(this,e,"numbersDep","setNumbersDepartment")},setNumbersDepartment(t){this.$store.dispatch("changeNumbersDepartment",t)}},mounted(){this.popupItem=this.$el.children[2].children[0],this.unsubscribeStore=l.Z.subscribe((t=>{"pushDepartment"===t.type&&(this.mainList.topList=JSON.parse(JSON.stringify(this.numbersDep)))})),this.mainList.topList=JSON.parse(JSON.stringify(this.numbersDep))},beforeDestroy(){this.unsubscribeStore()},directives:{ClickOutside:_()}},T=Z,J=(0,p.Z)(T,E,U,!1,null,"18075385",null),Q=J.exports,F=s(12246),R=s(35211),V=s(11107),W={name:"DepartmentSetting",components:{ControlPanel:V.Z,VNumbersSetting:Q,ManagerSettings:O,AgentSetting:k,DepartmentInfo:d,DeleteComponent:F.Z},data(){return{unsubscribeStore:()=>{},showOptions:"agents",showApplyBtn:!1,textToDeleteComponent:"Are you sure you want to delete this Department ?",titleToDeleteComponent:"Delete Department"}},computed:{...(0,n.Se)(["departmentInfo","getInitialDep","getDeleteDep"])},methods:{setShowOptions(t){this.showOptions=t,this.$store.dispatch("viewDepartment",this.departmentInfo.uid)},cancelDelete(){this.$store.dispatch("setDeleteDep",!1)},deleteDepartment(){this.$store.dispatch("deleteDepartment",localStorage.getItem("depUid")),this.$store.dispatch("setDeleteDep",!1)},handlerSubmit(){this.$store.dispatch("updateDepartment",this.departmentInfo)},clearDepartment(){this.$store.dispatch("viewDepartment",this.departmentInfo.uid)},isEqual(){const t=JSON.parse(JSON.stringify(this.departmentInfo)),e=JSON.parse(JSON.stringify(this.getInitialDep));t.relatedWith.user=N().orderBy(t.relatedWith.user,["internalNumber"],["desc"]),t.relatedWith.externalNumber=N().orderBy(t.relatedWith.externalNumber,["number"],["desc"]),t.belongTo.user=N().orderBy(t.belongTo.user,["internalNumber"],["desc"]),e.relatedWith.user=N().orderBy(e.relatedWith.user,["internalNumber"],["desc"]),e.relatedWith.externalNumber=N().orderBy(e.relatedWith.externalNumber,["number"],["desc"]),e.belongTo.user=N().orderBy(e.belongTo.user,["internalNumber"],["desc"]),this.showApplyBtn=!N().isEqual(t,e)}},mounted(){this.$route.query.exact&&(this.showOptions=this.$route.query.exact);const t=localStorage.getItem("depUid");this.$store.dispatch("viewDepartment",t),this.unsubscribeStore=l.Z.subscribe((t=>{R.Z.departments.includes(t.type)?this.isEqual():"pushDepartment"===t.type&&(this.showApplyBtn=!1)}))},beforeDestroy(){this.unsubscribeStore(),this.$store.dispatch("setDeleteDep",!1)}},B=W,H=(0,p.Z)(B,a,i,!1,null,null,null),q=H.exports},60949:function(t,e,s){s.d(e,{Z:function(){return o},e:function(){return r}});s(57658);var a=s(51579),i=s.n(a),n=s(83850);function r(t,e,s){t.mainList.getMainList=[],t.mainList.topList=[],t.mainList.bottomList=[],e.forEach((e=>{let a=!1;t[s].forEach((t=>{t.uid===e.uid&&(a=!0)})),a?t.mainList.topList.push(e):t.mainList.bottomList.push(e)})),t.mainList.getMainList=i().concat(t.mainList.topList,t.mainList.bottomList)}function o(t,e,s,a,i){const r=n.Z.changeCountry(e,t.mainList.topList,t.mainList.bottomList,"uid");t.mainList.topList=r.topList,t.mainList.bottomList=r.bottomList,t.mainList.getMainList=r.getCountries;let o=[];t[s].filter((t=>t.uid===e.uid)).length?o=t[s].filter((t=>t.uid!==e.uid)):(o=JSON.parse(JSON.stringify(t[s])),o.push(e)),i&&(t[s]=o),t.name="",t.fetch(),t[a](o)}},83850:function(t,e,s){s(57658);var a=s(51579),i=s.n(a);e["Z"]={changeCountry(t,e,s,a){let n=e,r=s,o=[];if(t){const e=n.filter((e=>e[a]===t[a]));e.length?(n=n.filter((e=>e[a]!==t[a])),r.push(t)):(r=r.filter((e=>e[a]!==t[a])),n.push(t)),n=i().sortBy(n,[a]),r=i().sortBy(r,[a]),o=i().concat(n,r)}else r=o=i().concat(JSON.parse(JSON.stringify(n)),JSON.parse(JSON.stringify(r))),n=[];return{topList:n,bottomList:r,getCountries:o}}}},35211:function(t,e){e["Z"]={user:["pushField","addSelectedQueues","setDeps","setNewRole","setVNumber","userDepsManaged","userQueuesManaged","setPermissionCDRMutation","viewBillingReportsMutatution","editQueueMutation"],departments:["pushNameDepartment","pushAgentsDepartment","pushManagersDepartment","pushNumbersDepartment"],queues:["strategyMutation","timeoutMutation","ringinuseMutation","waitMutation","queueNameInfoMutation","strategyInfoMutaion","timeoutInfoMutation","ringInUseInfoMutation","maxWaitInfoMutation","agentsQueueInfoMutation","managersQueueInfoMutation","updateQueuesInListMutation"],numbers:["setNumbers","deleteNumber"],paginator:{CDR:["pageCDRMutation","peerPageCDRMutation"],departments:["setDepPage","setDepPerPage"],users:["setUserPage","setUserPerPage"],queues:["setQueuePage","setQueuePerPage"],numbers:["setNumPage","setNumPerPage"],depForNums:["setDepPage","setDepPerPage"],payments:["setPaymentsPage","setPaymentsPerPage"],charges:["setChargesPage","setChargesPerPage"],leftRoutes:["setLeftRoutesPage","setLeftRoutesPerPage"],rightRoutes:["setRightRoutesPage","setRightRoutesPerPage"]},scenarios:["itemScenariosMutation","deleteItemMutation","changeNameScenarioMutation","newScenarioMutation","isSwappedModeMutation","listScenariosMutationWithObservers","arrayUidsOfDeleteScenariosMutation","listScenariosMutationAfterChangeName","arrayOfScenariosWithChangedNameMutation"]}}}]);